{"code":"(this[\"webpackJsonpamazonivs-vqa\"]=this[\"webpackJsonpamazonivs-vqa\"]||[]).push([[0],{111:function(e){e.exports=JSON.parse('[[{\"OutputKey\":\"CognitoUserPoolId\",\"OutputValue\":\"us-east-1_b3HBFYbqN\"},{\"OutputKey\":\"CognitoClientId\",\"OutputValue\":\"1a158jqrhth9ms6gh5a5muaj11\"},{\"OutputKey\":\"HttpApiEndpoint\",\"OutputValue\":\"https://e2ifym1bgh.execute-api.us-east-1.amazonaws.com/test\"},{\"OutputKey\":\"Region\",\"OutputValue\":\"us-east-1\"},{\"OutputKey\":\"WebsocketApiEndpoint\",\"OutputValue\":\"wss://1icfp77o2j.execute-api.us-east-1.amazonaws.com/test\"}]]')},220:function(e,t,n){},226:function(e,t){},228:function(e,t){},239:function(e,t){},241:function(e,t){},268:function(e,t){},270:function(e,t){},271:function(e,t){},276:function(e,t){},278:function(e,t){},284:function(e,t){},286:function(e,t){},305:function(e,t){},317:function(e,t){},320:function(e,t){},379:function(e,t,n){},380:function(e,t,n){\"use strict\";n.r(t);var a=n(5),s=n.n(a),r=n(191),o=n.n(r),c=(n(220),n(110)),i=n(111);function u(e){var t=i[0].findIndex((function(t){return t.OutputKey===e}));return i[0][t].OutputValue}var d=u(\"HttpApiEndpoint\"),l=u(\"WebsocketApiEndpoint\"),j=u(\"CognitoUserPoolId\"),b=u(\"CognitoClientId\"),p=u(\"Region\");c.default.configure({Auth:{region:p,userPoolId:j,userPoolWebClientId:b,authenticationFlowType:\"USER_PASSWORD_AUTH\"}});var h=s.a.createContext(),O=n(3);function f(e){return decodeURIComponent(window.location.search.replace(new RegExp(\"^(?:.*[&\\\\?]\"+encodeURIComponent(e).replace(/[.+*]/g,\"\\\\$&\")+\"(?:\\\\=([^&]*))?)?.*$\",\"i\"),\"$1\"))}var v=function(e){var t=e.children,n={channelArn:window.atob(f(\"channel\")),playbackUrl:window.atob(f(\"playback\"))};return Object(O.jsx)(h.Provider,{value:n,children:t})},m=n(12),x=s.a.createContext(),S=\"SET_SIGNED_IN_USER_ACTION\",g=\"SET_SIGNED_OUT_USER_ACTION\",q=function(e,t){switch(t.type){case S:return Object(m.a)(Object(m.a)({},e),{},{isSignedIn:!0,isModerator:t.isModerator,accessJWTToken:t.accessJWTToken});case g:return Object(m.a)({},y);default:throw new Error(\"unexpected action type\")}},y={isSignedIn:!1,isModerator:!1,accessToken:\"\"},C=function(e){var t=e.children,n=s.a.useReducer(q,y);return Object(O.jsx)(x.Provider,{value:n,children:t})},I=s.a.createContext(),w=\"CLIENT_ADD_QUESTION_ACTION\",T=\"CLIENT_DELETE_QUESTION_ACTION\",N=\"CLIENT_INCREMENT_VOTE_ACTION\",E=\"CLIENT_DECREMENT_VOTE_ACTION\",_=\"SERVER_UPDATE_QUESTIONS_ACTION\",k=\"SERVER_SET_QUESTIONS_ACTION\";function A(e){return{Id:e.Id,Content:e.Content,Votes:e.Votes,Answered:e.Answered,Current:e.Current}}function V(e,t){return t.question.Votes-e.question.Votes}var M=function(e,t){switch(t.type){case w:var n={question:{Id:t.id,Content:t.content,Votes:0,Answered:!1,Current:!1},timeStamp:0,removed:!1};return Object(m.a)(Object(m.a)({},e),{},{questionStates:e.questionStates.concat([n]).sort(V)});case T:return Object(m.a)(Object(m.a)({},e),{},{questionStates:e.questionStates.map((function(e){return e.question.Id===t.id&&(e.removed=!0),e})).sort(V)});case N:return Object(m.a)(Object(m.a)({},e),{},{questionStates:e.questionStates.map((function(e){return e.question.Id===t.id&&(e.question.Votes=e.question.Votes+1),e})).sort(V)});case E:return Object(m.a)(Object(m.a)({},e),{},{questionStates:e.questionStates.map((function(e){return e.question.Id===t.id&&(e.question.Votes=e.question.Votes-1),e})).sort(V)});case _:return t.updates.forEach((function(t){var n=e.questionStates.findIndex((function(e){return t.question.Id===e.question.Id}));if(!(-1!==n&&t.timeStamp<e.questionStates[n].timeStamp))switch(t.change){case\"INSERT\":-1===n?e.questionStates=e.questionStates.concat([{question:A(t.question),timeStamp:t.timeStamp,removed:!1}]):e.questionStates[n].timeStamp=t.timeStamp;break;case\"MODIFY\":-1===n?e.questionStates=e.questionStates.concat([{question:A(t.question),timeStamp:t.timeStamp,removed:!1}]):(e.questionStates[n].timeStamp=t.timeStamp,e.questionStates[n].question=A(t.question));break;case\"REMOVE\":-1===n?e.questionStates=e.questionStates.concat([{question:A(t.question),timeStamp:t.timeStamp,removed:!0}]):(e.questionStates[n].timeStamp=t.timeStamp,e.questionStates[n].removed=!0);break;default:return}})),Object(m.a)(Object(m.a)({},e),{},{questionStates:e.questionStates.sort(V)});case k:return Object(m.a)(Object(m.a)({},e),{},{questionStates:t.questions.map((function(e){return{question:A(e),timeStamp:0,removed:!1}})).sort(V)});default:throw new Error(\"unexpected action type\")}},L={questionStates:[]},R=function(e){var t=e.children,n=s.a.useReducer(M,L);return Object(O.jsx)(I.Provider,{value:n,children:t})},P=s.a.createContext(),U=\"SET_CURRENT_QUESTION_ACTION\",D=function(e,t){switch(t.type){case U:return Object(m.a)(Object(m.a)({},e),{},{currentQuestion:t.question});default:throw new Error(\"unexpected action type\")}},H={currentQuestion:null},J=function(e){var t=e.children,n=s.a.useReducer(D,H);return Object(O.jsx)(P.Provider,{value:n,children:t})},W=n(78),z=s.a.createContext(),Q=\"ADD_VOTE_ACTION\",F=\"DELETE_VOTE_ACTION\",B=\"SET_VOTES_ACTION\",K=\"CLEAR_VOTES_ACTION\",Z=function(e,t){switch(t.type){case Q:return Object(m.a)(Object(m.a)({},e),{},{questionIdMap:Object(m.a)(Object(m.a)({},e.questionIdMap),{},Object(W.a)({},t.questionId,!0))});case F:var n=e.questionIdMap;return delete n[t.questionId],Object(m.a)(Object(m.a)({},e),{},{questionIdMap:Object(m.a)({},n)});case B:return Object(m.a)(Object(m.a)({},e),{},{questionIdMap:t.questionIdMap});case K:return Object(m.a)(Object(m.a)({},e),{},{questionIdMap:{}});default:throw new Error(\"unexpected action type\")}},G={questionIdMap:{}},$=function(e){var t=e.children,n=s.a.useReducer(Z,G);return Object(O.jsx)(z.Provider,{value:n,children:t})},Y=n(10),X=n(200),ee=n(201),te=n(205),ne=n(204),ae=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){var e;return Object(X.a)(this,n),(e=t.call(this)).channelArn=\"\",e}return Object(ee.a)(n,[{key:\"setupWebSocket\",value:function(e){var t=this;if(this.channelArn!==e){this.channelArn=e;var n=l+\"?channelarn=\"+e;this.ws=new WebSocket(n),this.ws.onmessage=function(e){var n=Object(Y.a)(t.context,2)[1],a=JSON.parse(e.data);switch(a.type){case\"INITIAL_STATE\":console.debug(\"INIT STATE\",a.questions),n({type:k,questions:a.questions});break;case\"UPDATES\":console.debug(\"UPDATE\",a.updates),n({type:_,updates:a.updates});break;default:return}}}}},{key:\"render\",value:function(){var e=this;return Object(O.jsx)(h.Consumer,{children:function(t){var n=t.channelArn;return e.setupWebSocket(n)}})}}]),n}(s.a.Component);ae.contextType=I;var se=ae;var re=function(){var e,t,n=s.a.useContext(I),a=Object(Y.a)(n,1)[0].questionStates,r=s.a.useContext(P),o=Object(Y.a)(r,1)[0].currentQuestion,c=!0;if(null===o){var i=a.findIndex((function(e){return e.question.Current}));-1===i?c=!1:(e=a[i].question.Content,t=a[i].question.Votes)}else e=o.Content,t=o.Votes;return c?Object(O.jsx)(\"div\",{className:\"current-question\",children:Object(O.jsx)(\"div\",{className:\"c-item\",children:Object(O.jsxs)(\"div\",{className:\"c-item__card\",children:[Object(O.jsxs)(\"div\",{className:\"c-item__votes\",children:[Object(O.jsx)(\"svg\",{className:\"upvote-btn__svg\",width:\"22\",height:\"22\",viewBox:\"0 0 22 22\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:Object(O.jsx)(\"path\",{d:\"M3.66797 11L4.96047 12.2925L10.0846 7.1775V18.3333H11.918V7.1775L17.033 12.3017L18.3346 11L11.0013 3.66666L3.66797 11Z\"})}),Object(O.jsx)(\"span\",{className:\"upvote-btn__count\",children:t})]}),Object(O.jsxs)(\"div\",{className:\"c-item__content\",children:[Object(O.jsx)(\"strong\",{children:\"Current question\"}),Object(O.jsx)(\"p\",{children:e})]})]})})}):null};var oe=function(){var e=s.a.useContext(h).playbackUrl,t=s.a.useContext(P),n=Object(Y.a)(t,2)[1];return s.a.useEffect((function(){var t=window.videojs,a=window.registerIVSTech,s=window.registerIVSQualityPlugin;t.getPlugin(\"getIVSPlayer\")||(a(t),s(t));var r=t(\"amazon-ivs-videojs\",{techOrder:[\"AmazonIVS\"],autoplay:!0,muted:!0}),o=r.getIVSPlayer(),c=r.getIVSEvents().PlayerEventType;return o.addEventListener(c.TEXT_METADATA_CUE,(function(e){var t=e.text;console.log(\"Timed metadata: \",t),n({type:U,question:JSON.parse(t)})})),r.ready((function(){r.enableIVSQualityPlugin(),r.src(e),r.play()})),function(){r.dispose()}}),[]),Object(O.jsxs)(\"div\",{className:\"player-wrapper\",children:[Object(O.jsx)(re,{}),Object(O.jsx)(\"div\",{\"data-vjs-player\":!0,children:Object(O.jsx)(\"video\",{id:\"amazon-ivs-videojs\",className:\"video-js vjs-fluid\",playsInline:!0})})]})},ce=n(18),ie=n.n(ce),ue=n(27),de=\"DELETE_VOTE\",le=\"NONE\",je=d+\"/deleteVote\",be=d+\"/addVote\";var pe=function(e){var t=e.votes,n=e.questionId,a=e.disabled,r=s.a.useContext(I),o=Object(Y.a)(r,2)[1],c=s.a.useContext(z),i=Object(Y.a)(c,2),u=i[0].questionIdMap,d=i[1],l=s.a.useContext(h).channelArn,j=s.a.useContext(x),b=Object(Y.a)(j,1)[0].accessJWTToken,p=s.a.useState(le),f=Object(Y.a)(p,2),v=f[0],m=f[1];s.a.useEffect((function(){v!==le&&function(){var e=Object(ue.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o({type:v===de?E:N,id:n}),d({type:v===de?F:Q,questionId:n}),t=v===de?je:be,e.next=6,fetch(t,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:b},body:JSON.stringify({channelArn:l,questionId:n})});case 6:if(200===e.sent.status){e.next=9;break}throw new Error;case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(\"Failed to add/delete vote\",e.t0),o({type:v===de?N:E,id:n}),d({type:v===de?Q:F,questionId:n});case 16:case\"end\":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()()}),[v]);var S=!!u[n],g=\"\";return g=S?\"btn rounded upvote-btn has-voted\":a?\"btn rounded upvote-btn\":\"btn btn--primary rounded upvote-btn\",Object(O.jsxs)(\"button\",{className:g,onClick:function(){return m(S?de:\"ADD_VOTE\")},disabled:a,children:[Object(O.jsx)(\"svg\",{className:\"upvote-btn__svg\",width:\"22\",height:\"22\",viewBox:\"0 0 22 22\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:Object(O.jsx)(\"path\",{d:\"M3.66797 11L4.96047 12.2925L10.0846 7.1775V18.3333H11.918V7.1775L17.033 12.3017L18.3346 11L11.0013 3.66666L3.66797 11Z\"})}),Object(O.jsx)(\"span\",{className:\"upvote-btn__count\",children:t})]})};var he=function(e,t){s.a.useEffect((function(){function n(n){e.current&&!e.current.contains(n.target)&&t()}return document.addEventListener(\"mousedown\",n),function(){document.removeEventListener(\"mousedown\",n)}}),[e,t])},Oe=d+\"/deleteQuestion\";var fe=function(e){var t=e.questionId,n=e.onHideModal,a=s.a.useContext(I),r=Object(Y.a)(a,2)[1],o=s.a.useContext(h).channelArn,c=s.a.useContext(x),i=Object(Y.a)(c,1)[0].accessJWTToken,u=s.a.useState(!1),d=Object(Y.a)(u,2),l=d[0],j=d[1],b=s.a.useRef(null);return he(b,n),s.a.useEffect((function(){l&&function(){var e=Object(ue.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(Oe,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:i},body:JSON.stringify({channelArn:o,id:t})});case 3:if(200!==e.sent.status){e.next=8;break}r({type:T,id:t}),e.next=9;break;case 8:throw new Error;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(\"Failure in deleting question\",e.t0);case 14:n();case 15:case\"end\":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()()}),[l]),Object(O.jsxs)(\"div\",{className:\"modal\",children:[Object(O.jsxs)(\"div\",{className:\"modal__el\",ref:b,children:[Object(O.jsx)(\"h2\",{className:\"mg-b-1\",children:\"Are you sure you want to delete this question?\"}),Object(O.jsxs)(\"div\",{className:\"grid grid--responsive grid--2\",children:[Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn--secondary mg-t-1\",onClick:n,children:\"Cancel\"}),Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn--destruct mg-t-1\",onClick:function(){return j(!0)},children:\"Delete\"})]})]}),Object(O.jsx)(\"div\",{className:\"modal__overlay\"})]})};var ve=function(e){var t=e.questionId,n=s.a.useState(!1),a=Object(Y.a)(n,2),r=a[0],o=a[1],c=r?Object(O.jsx)(fe,{questionId:t,onHideModal:function(){return o(!1)}}):null;return Object(O.jsxs)(s.a.Fragment,{children:[c,Object(O.jsx)(\"button\",{onClick:function(){return o(!0)},className:\"btn btn--icon btn--destruct\",title:\"Delete\",children:Object(O.jsx)(\"svg\",{className:\"icon icon--24 icon--inverted\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:Object(O.jsx)(\"path\",{d:\"M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM19 4H15.5L14.5 3H9.5L8.5 4H5V6H19V4Z\"})})})]})},me=d+\"/setCurrentQuestion\";var xe=function(e){var t=e.questionId,n=e.onHideModal,a=s.a.useContext(h).channelArn,r=s.a.useContext(x),o=Object(Y.a)(r,1)[0].accessJWTToken,c=s.a.useState(!1),i=Object(Y.a)(c,2),u=i[0],d=i[1],l=s.a.useRef(null);return he(l,n),s.a.useEffect((function(){u&&function(){var e=Object(ue.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(me,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:o},body:JSON.stringify({channelArn:a,id:t})});case 3:if(200===e.sent.status){e.next=6;break}throw new Error;case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(\"Failure in setting current question\",e.t0);case 11:n();case 12:case\"end\":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[u]),Object(O.jsxs)(\"div\",{className:\"modal\",children:[Object(O.jsxs)(\"div\",{className:\"modal__el\",ref:l,children:[Object(O.jsx)(\"h2\",{className:\"mg-b-1\",children:\"Mark this question as current?\"}),Object(O.jsxs)(\"div\",{className:\"grid grid--responsive grid--2\",children:[Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn--secondary mg-t-1\",onClick:n,children:\"Cancel\"}),Object(O.jsx)(\"button\",{type:\"button\",className:\"btn btn--confirm mg-t-1\",onClick:function(){return d(!0)},children:\"Mark as current\"})]})]}),Object(O.jsx)(\"div\",{className:\"modal__overlay\"})]})};var Se=function(e){var t=e.questionId,n=s.a.useState(!1),a=Object(Y.a)(n,2),r=a[0],o=a[1],c=r?Object(O.jsx)(xe,{questionId:t,onHideModal:function(){return o(!1)}}):null;return Object(O.jsxs)(s.a.Fragment,{children:[c,Object(O.jsx)(\"button\",{onClick:function(){return o(!0)},className:\"btn btn--icon btn--confirm\",title:\"Mark as current\",children:Object(O.jsx)(\"svg\",{className:\"icon icon--24\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:Object(O.jsx)(\"path\",{d:\"M18.99 20.4998L19 9.49976C19 8.82976 18.67 8.22976 18.16 7.86976L12 3.49976L5.84 7.86976C5.33 8.22976 5 8.82976 5 9.49976L5.01 20.4998L12 15.6598L18.99 20.4998Z\"})})})]})};var ge=function(e){var t=e.content,n=e.id,a=e.votes,r=s.a.useContext(x),o=Object(Y.a)(r,1)[0],c=o.isSignedIn,i=o.isModerator;return Object(O.jsxs)(\"div\",{className:\"q-item\",children:[Object(O.jsxs)(\"div\",{className:\"q-item__card\",children:[Object(O.jsx)(pe,{votes:a,questionId:n,disabled:!c}),Object(O.jsx)(\"p\",{className:\"q-item__content\",children:t})]}),i&&Object(O.jsxs)(\"div\",{className:\"q-item__moderation\",children:[Object(O.jsx)(Se,{questionId:n}),Object(O.jsx)(ve,{questionId:n})]})]})};var qe=function(){var e=s.a.useContext(I),t=Object(Y.a)(e,1)[0].questionStates,n=s.a.useContext(P),a=Object(Y.a)(n,1)[0].currentQuestion,r=[];return t.forEach((function(e){(function(e,t){return!e.removed&&!e.question.Answered&&(!e.question.Current||null!==t&&t.Id!==e.question.Id)})(e,a)&&r.push(Object(O.jsx)(ge,{content:e.question.Content,votes:e.question.Votes,id:e.question.Id},\"\".concat(e.question.Id)))})),Object(O.jsx)(\"div\",{className:\"questions\",children:r})},ye=d+\"/addQuestion\",Ce=d+\"/addVote\";var Ie=function(e){var t=e.onHideModal,n=s.a.useContext(I),a=Object(Y.a)(n,2)[1],r=s.a.useContext(z),o=Object(Y.a)(r,2)[1],c=s.a.useContext(h).channelArn,i=s.a.useContext(x),u=Object(Y.a)(i,1)[0].accessJWTToken,d=s.a.useState(!1),l=Object(Y.a)(d,2),j=l[0],b=l[1],p=s.a.useState(\"\"),f=Object(Y.a)(p,2),v=f[0],m=f[1],S=s.a.useRef(null);return he(S,t),s.a.useEffect((function(){j&&function(){var e=Object(ue.a)(ie.a.mark((function e(){var n,s,r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(ye,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:u},body:JSON.stringify({channelArn:c,question:v})});case 3:if(200!==(n=e.sent).status){e.next=16;break}return e.next=7,n.json();case 7:return s=e.sent,r=s.id,a({type:w,id:r,content:v}),e.next=12,fetch(Ce,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:u},body:JSON.stringify({channelArn:c,questionId:r})});case 12:200===e.sent.status&&(a({type:N,id:r}),o({type:Q,questionId:r})),e.next=17;break;case 16:throw new Error;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(\"Failure in adding and voting new question\",e.t0);case 22:t();case 23:case\"end\":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}()()}),[j]),Object(O.jsxs)(\"div\",{className:\"modal\",children:[Object(O.jsxs)(\"div\",{className:\"modal__el\",ref:S,children:[Object(O.jsx)(\"h2\",{className:\"mg-b-1\",children:\"Submit a question\"}),Object(O.jsx)(\"form\",{children:Object(O.jsxs)(\"fieldset\",{children:[Object(O.jsx)(\"textarea\",{rows:\"8\",placeholder:\"Type here...\",onChange:function(e){return m(e.target.value)},disabled:j,value:v}),Object(O.jsx)(\"p\",{children:Object(O.jsx)(\"em\",{children:\"Submissions are anonymous\"})}),Object(O.jsx)(\"button\",{type:\"submit\",className:\"btn btn--primary mg-t-1\",onClick:function(e){e.preventDefault(),b(!0)},children:\"Submit\"})]})})]}),Object(O.jsx)(\"div\",{className:\"modal__overlay\"})]})};var we=function(){var e=s.a.useState(!1),t=Object(Y.a)(e,2),n=t[0],a=t[1],r=s.a.useContext(x),o=Object(Y.a)(r,1)[0].isSignedIn;return Object(O.jsxs)(s.a.Fragment,{children:[n?Object(O.jsx)(Ie,{onHideModal:function(){return a(!1)}}):null,o?Object(O.jsx)(\"button\",{onClick:function(){return a(!0)},className:\"btn btn--floating btn--fixed\",children:Object(O.jsxs)(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",children:[Object(O.jsx)(\"path\",{d:\"M0 0h24v24H0z\",fill:\"none\"}),Object(O.jsx)(\"path\",{d:\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"})]})}):null]})},Te=n(55);var Ne=function(e){var t=e.onHideModal,n=s.a.useRef(null);return he(n,t),Object(O.jsxs)(\"div\",{className:\"modal\",children:[Object(O.jsx)(\"div\",{className:\"modal__el modal__el--auth\",ref:n,children:Object(O.jsxs)(Te.a,{theme:{sectionHeaderContent:{fontSize:\"2.4rem\",fontWeight:\"bold\"},sectionBody:{width:\"100%\",margin:\"2rem 0\",display:\"flex\",flexDirection:\"column\",flexGrow:\"1\"},formField:{margin:\"0.5rem 0\"},input:{width:\"100%\"},a:{fontWeight:\"bold\",cursor:\"pointer\",paddingLeft:\"0.5rem\"},sectionFooter:{width:\"100%\"},sectionFooterPrimaryContent:{display:\"flex\"},button:{display:\"flex\",width:\"100%\",alignItems:\"center\",alignContent:\"center\",justifyContent:\"center\",fontWeight:\"bold\",color:\"var(--color-text-inverted)\",background:\"var(--color-bg-button-primary-default)\"},selectInput:{display:\"grid\",gridTemplateColumns:\"auto 1fr\",gridGap:\"1rem\"},sectionFooterSecondaryContent:{display:\"flex\",margin:\"1rem 0 0 0\"}},hideDefault:!0,onStateChange:function(e){\"signedIn\"===e&&t()},children:[Object(O.jsx)(Te.d,{}),Object(O.jsx)(Te.e,{}),Object(O.jsx)(Te.b,{}),Object(O.jsx)(Te.c,{})]})}),Object(O.jsx)(\"div\",{className:\"modal__overlay\"})]})},Ee=n(203),_e=n(330),ke=d+\"/getVotes\";function Ae(e,t,n,a){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(ue.a)(ie.a.mark((function e(t,n,a,s){var r,o,c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:S,isModerator:Me(a),accessJWTToken:a.accessToken.jwtToken}),e.next=3,fetch(ke,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:a.accessToken.jwtToken},body:JSON.stringify({channelArn:s})});case 3:if(200!==(r=e.sent).status){e.next=10;break}return e.next=7,r.json();case 7:o=e.sent,c=o.reduce((function(e,t){return e[t.QuestionId]=!0,e}),{}),n({type:B,questionIdMap:c});case 10:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){var t=e.idToken.payload[\"cognito:groups\"];return void 0!==t&&-1!==t.indexOf(\"moderator\")}var Le=function(){var e=s.a.useState(!1),t=Object(Y.a)(e,2),n=t[0],a=t[1],r=s.a.useContext(x),o=Object(Y.a)(r,2),c=o[0].isSignedIn,i=o[1],u=s.a.useContext(h).channelArn,d=s.a.useContext(z),l=Object(Y.a)(d,2)[1];return s.a.useEffect((function(){function e(){return(e=Object(ue.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _e.a.listen(\"auth\",(function(e){var t=e.payload;switch(t.event){case\"signIn\":Ae(i,l,t.data.signInUserSession,u);break;default:i({type:g}),l({type:K})}})),e.prev=1,e.next=4,Ee.a.currentAuthenticatedUser();case 4:t=e.sent,Ae(i,l,t.signInUserSession,u),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),i({type:g}),l({type:K});case 12:case\"end\":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(O.jsxs)(s.a.Fragment,{children:[n&&Object(O.jsx)(Ne,{onHideModal:function(){return a(!1)}}),Object(O.jsx)(\"button\",{className:c?\"btn\":\"btn btn--primary\",onClick:function(){c?Ee.a.signOut():a(!0)},children:c?\"Sign out\":\"Sign in\"})]})};n(379);var Re=function(){return Object(O.jsx)(v,{children:Object(O.jsx)(J,{children:Object(O.jsx)($,{children:Object(O.jsx)(R,{children:Object(O.jsxs)(C,{children:[Object(O.jsx)(se,{}),Object(O.jsxs)(\"header\",{children:[Object(O.jsx)(\"h1\",{children:\"Interactive Live Q&A\"}),Object(O.jsx)(Le,{})]}),Object(O.jsxs)(\"section\",{children:[Object(O.jsx)(oe,{}),Object(O.jsx)(qe,{}),Object(O.jsx)(we,{})]})]})})})})})};o.a.render(Object(O.jsx)(Re,{}),document.getElementById(\"root\"))}},[[380,1,2]]]);","name":"static/js/main.9c227350.chunk.js","map":{"version":3,"sources":["static/js/main.9c227350.chunk.js"],"names":["this","push","module","exports","JSON","parse","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","lib_esm","backendStackOutput","getValueFromStackOutput","key","index","findIndex","o","OutputKey","OutputValue","HTTP_API_ENDPOINT","WEBSOCKET_API_ENDPOINT","COGNITO_USER_POOL_ID","COGNITO_USER_POOL_CLIENT_ID","REGION","configure","Auth","region","userPoolId","userPoolWebClientId","authenticationFlowType","providers_IVSContext","a","createContext","jsx_runtime","getQueryStringValue","decodeURIComponent","window","location","search","replace","RegExp","encodeURIComponent","providers_IVSProvider","_ref","children","value","channelArn","atob","playbackUrl","Object","Provider","objectSpread2","providers_UserContext","SET_SIGNED_IN_USER_ACTION","SET_SIGNED_OUT_USER_ACTION","UserProvider_reducer","state","action","type","isSignedIn","isModerator","accessJWTToken","initialState","Error","accessToken","providers_UserProvider","useReducer","providers_QuestionContext","CLIENT_ADD_QUESTION_ACTION","CLIENT_DELETE_QUESTION_ACTION","CLIENT_INCREMENT_VOTE_ACTION","CLIENT_DECREMENT_VOTE_ACTION","SERVER_UPDATE_QUESTIONS_ACTION","SERVER_SET_QUESTIONS_ACTION","pickQuestionProperties","Id","Content","Votes","Answered","Current","sortByVote","questionState1","questionState2","question","QuestionProvider_reducer","newQuestionState","id","content","timeStamp","removed","questionStates","concat","sort","map","s","updates","forEach","update","i","change","questions","q","QuestionProvider_initialState","providers_QuestionProvider","_ref2","providers_PlayerMetadataContext","SET_CURRENT_QUESTION_ACTION","PlayerMetadataProvider_reducer","currentQuestion","PlayerMetadataProvider_initialState","providers_PlayerMetadataProvider","defineProperty","providers_VoteContext","ADD_VOTE_ACTION","DELETE_VOTE_ACTION","VoteProvider_SET_VOTES_ACTION","CLEAR_VOTES_ACTION","VoteProvider_reducer","questionIdMap","questionId","newQuestionIdMap","VoteProvider_initialState","providers_VoteProvider","slicedToArray","classCallCheck","createClass","inherits","createSuper","WebSocketClient_WebSocketClient","_React$Component","WebSocketClient","_super","_this","call","_this2","webSocketUrl","ws","WebSocket","onmessage","msg","dispatch","context","message","data","console","debug","_this3","Consumer","setupWebSocket","Component","contextType","src_WebSocketClient","player_CurrentQuestion","votes","_React$useContext","useContext","_React$useContext3","playerCurrentQuestion","showCurrentQuestion","className","width","height","viewBox","fill","xmlns","d","player_Player","_React$useContext2","useEffect","videojs","registerIVSTech","registerIVSQualityPlugin","getPlugin","player","techOrder","autoplay","muted","ivsPlayer","getIVSPlayer","PlayerEventType","getIVSEvents","addEventListener","TEXT_METADATA_CUE","cue","metadataText","text","log","ready","enableIVSQualityPlugin","src","play","dispose","playsInline","regenerator","regenerator_default","asyncToGenerator","DELETE_VOTE_ENUM","NONE_ENUM","DELETE_VOTE_ENDPOINT","ADD_VOTE_ENDPOINT","Question_VoteButton","disabled","questionDispatch","_React$useContext4","voteDispatch","_React$useContext6","_React$useState","useState","_React$useState2","postVoteType","setPostVoteType","mark","_callee","url","wrap","_context","prev","next","fetch","method","headers","Authorization","body","stringify","sent","status","t0","stop","apply","arguments","postVote","votedState","onClick","util_useOutsideClick","ref","handleClickOutside","event","current","contains","target","document","removeEventListener","DELETE_QUESTION_ENDPOINT","Question_DeleteQuestionModal","onHideModal","isPosting","setIsPosting","modalRef","useRef","postDeleteQuestion","Question_DeleteQuestionButton","modalVisible","setModalVisibility","modal","Fragment","title","CURRENT_QUESTION_ENDPOINT","Question_CurrentQuestionModal","postCurrentQuestion","Question_CurrentQuestionButton","Question_Question","_React$useContext2$","questionList_QuestionList","questionComponents","questionState","shouldShowQuestion","ADD_QUESTION_ENDPOINT","AddQuestionModal_ADD_VOTE_ENDPOINT","addQuestion_AddQuestionModal","_React$useState3","_React$useState4","textInput","setTextInput","questionResponse","_yield$questionRespon","json","postAddQuestion","rows","placeholder","onChange","e","preventDefault","addQuestion_AddQuestionButton","aws_amplify_react_lib_esm","auth_SignInModal","theme","sectionHeaderContent","fontSize","fontWeight","sectionBody","margin","display","flexDirection","flexGrow","formField","input","cursor","paddingLeft","sectionFooter","sectionFooterPrimaryContent","button","alignItems","alignContent","justifyContent","color","background","selectInput","gridTemplateColumns","gridGap","sectionFooterSecondaryContent","hideDefault","onStateChange","Hub","GET_VOTES_ENDPOINT","fetchSetUserInfoVotes","_x","_x2","_x3","_x4","_fetchSetUserInfoVotes","_callee2","userDispatch","signInUserSession","votesResponse","_context2","getModeratorStatusFromSession","jwtToken","reduce","v","QuestionId","session","userGroups","idToken","payload","undefined","indexOf","auth_SignInButton","_setAuthListeners","user","listen","currentAuthenticatedUser","setAuthListeners","signOut","src_App","render","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpamazonivs-vqa\"] = this[\"webpackJsonpamazonivs-vqa\"] || []).push([[0],{\n\n/***/ 111:\n/***/ (function(module) {\n\nmodule.exports = JSON.parse(\"[[{\\\"OutputKey\\\":\\\"CognitoUserPoolId\\\",\\\"OutputValue\\\":\\\"us-east-1_b3HBFYbqN\\\"},{\\\"OutputKey\\\":\\\"CognitoClientId\\\",\\\"OutputValue\\\":\\\"1a158jqrhth9ms6gh5a5muaj11\\\"},{\\\"OutputKey\\\":\\\"HttpApiEndpoint\\\",\\\"OutputValue\\\":\\\"https://e2ifym1bgh.execute-api.us-east-1.amazonaws.com/test\\\"},{\\\"OutputKey\\\":\\\"Region\\\",\\\"OutputValue\\\":\\\"us-east-1\\\"},{\\\"OutputKey\\\":\\\"WebsocketApiEndpoint\\\",\\\"OutputValue\\\":\\\"wss://1icfp77o2j.execute-api.us-east-1.amazonaws.com/test\\\"}]]\");\n\n/***/ }),\n\n/***/ 220:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 226:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 228:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 239:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 241:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 268:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 270:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 271:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 276:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 278:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 284:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 286:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 305:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 317:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 320:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 379:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 380:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(5);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(191);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(220);\n\n// EXTERNAL MODULE: ./node_modules/aws-amplify/lib-esm/index.js\nvar lib_esm = __webpack_require__(110);\n\n// EXTERNAL MODULE: ./src/backendStackOutput.json\nvar backendStackOutput = __webpack_require__(111);\n\n// CONCATENATED MODULE: ./src/config.js\n// Backend stack output in the format of:\n// [[{\n//     OutputKey: xxx, \n//     OutputValue: xxx\n// }...]]\nfunction getValueFromStackOutput(key){var index=backendStackOutput[0].findIndex(function(o){return o.OutputKey===key;});return backendStackOutput[0][index].OutputValue;}var HTTP_API_ENDPOINT=getValueFromStackOutput('HttpApiEndpoint');var WEBSOCKET_API_ENDPOINT=getValueFromStackOutput('WebsocketApiEndpoint');var COGNITO_USER_POOL_ID=getValueFromStackOutput('CognitoUserPoolId');var COGNITO_USER_POOL_CLIENT_ID=getValueFromStackOutput('CognitoClientId');var REGION=getValueFromStackOutput('Region');\n// CONCATENATED MODULE: ./src/auth/AuthConfigure.js\nlib_esm[\"default\"].configure({Auth:{region:REGION,userPoolId:COGNITO_USER_POOL_ID,userPoolWebClientId:COGNITO_USER_POOL_CLIENT_ID,authenticationFlowType:'USER_PASSWORD_AUTH'}});\n// CONCATENATED MODULE: ./src/providers/IVSContext.js\nvar IVSContext=/*#__PURE__*/react_default.a.createContext();/* harmony default export */ var providers_IVSContext = (IVSContext);\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(3);\n\n// CONCATENATED MODULE: ./src/providers/IVSProvider.js\nfunction getQueryStringValue(key){return decodeURIComponent(window.location.search.replace(new RegExp(\"^(?:.*[&\\\\?]\"+encodeURIComponent(key).replace(/[.+*]/g,\"\\\\$&\")+\"(?:\\\\=([^&]*))?)?.*$\",\"i\"),\"$1\"));}var IVSProvider_IVSProvider=function IVSProvider(_ref){var children=_ref.children;var value={channelArn:window.atob(getQueryStringValue('channel')),playbackUrl:window.atob(getQueryStringValue('playback'))};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(providers_IVSContext.Provider,{value:value,children:children});};/* harmony default export */ var providers_IVSProvider = (IVSProvider_IVSProvider);\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(12);\n\n// CONCATENATED MODULE: ./src/providers/UserContext.js\nvar UserContext=/*#__PURE__*/react_default.a.createContext();/* harmony default export */ var providers_UserContext = (UserContext);\n// CONCATENATED MODULE: ./src/providers/UserProvider.js\nvar SET_SIGNED_IN_USER_ACTION='SET_SIGNED_IN_USER_ACTION';var SET_SIGNED_OUT_USER_ACTION='SET_SIGNED_OUT_USER_ACTION';var UserProvider_reducer=function reducer(state,action){switch(action.type){case SET_SIGNED_IN_USER_ACTION:return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{isSignedIn:true,isModerator:action.isModerator,accessJWTToken:action.accessJWTToken});case SET_SIGNED_OUT_USER_ACTION:return Object(objectSpread2[\"a\" /* default */])({},initialState);default:throw new Error('unexpected action type');}};var initialState={isSignedIn:false,isModerator:false,accessToken:''};var UserProvider_UserProvider=function UserProvider(_ref){var children=_ref.children;var value=react_default.a.useReducer(UserProvider_reducer,initialState);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(providers_UserContext.Provider,{value:value,children:children});};/* harmony default export */ var providers_UserProvider = (UserProvider_UserProvider);\n// CONCATENATED MODULE: ./src/providers/QuestionContext.js\nvar QuestionContext=/*#__PURE__*/react_default.a.createContext();/* harmony default export */ var providers_QuestionContext = (QuestionContext);\n// CONCATENATED MODULE: ./src/providers/QuestionProvider.js\nvar CLIENT_ADD_QUESTION_ACTION='CLIENT_ADD_QUESTION_ACTION';var CLIENT_DELETE_QUESTION_ACTION='CLIENT_DELETE_QUESTION_ACTION';var CLIENT_INCREMENT_VOTE_ACTION='CLIENT_INCREMENT_VOTE_ACTION';var CLIENT_DECREMENT_VOTE_ACTION='CLIENT_DECREMENT_VOTE_ACTION';var SERVER_UPDATE_QUESTIONS_ACTION='SERVER_UPDATE_QUESTIONS_ACTION';var SERVER_SET_QUESTIONS_ACTION='SERVER_SET_QUESTIONS_ACTION';var SET_VOTES_ACTION='SET_VOTES_ACTION';// questionStates: [{\n//     question: {\n//         Id: String,\n//         Content: String,\n//         Votes: Number,\n//         Answered: Boolean,\n//         Current: Boolean\n//     }\n//     timeStamp: Number,\n//     removed: Boolean,\n// }...]\nfunction pickQuestionProperties(_ref){var Id=_ref.Id,Content=_ref.Content,Votes=_ref.Votes,Answered=_ref.Answered,Current=_ref.Current;return{Id:Id,Content:Content,Votes:Votes,Answered:Answered,Current:Current};}function sortByVote(questionState1,questionState2){return questionState2.question.Votes-questionState1.question.Votes;}var QuestionProvider_reducer=function reducer(state,action){switch(action.type){case CLIENT_ADD_QUESTION_ACTION:var newQuestionState={question:{Id:action.id,Content:action.content,Votes:0,Answered:false,Current:false},timeStamp:0,removed:false};return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{questionStates:state.questionStates.concat([newQuestionState]).sort(sortByVote)});case CLIENT_DELETE_QUESTION_ACTION:return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{questionStates:state.questionStates.map(function(s){if(s.question.Id===action.id){s.removed=true;}return s;}).sort(sortByVote)});case CLIENT_INCREMENT_VOTE_ACTION:return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{questionStates:state.questionStates.map(function(s){if(s.question.Id===action.id){s.question.Votes=s.question.Votes+1;}return s;}).sort(sortByVote)});case CLIENT_DECREMENT_VOTE_ACTION:return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{questionStates:state.questionStates.map(function(s){if(s.question.Id===action.id){s.question.Votes=s.question.Votes-1;}return s;}).sort(sortByVote)});case SERVER_UPDATE_QUESTIONS_ACTION:action.updates.forEach(function(update){var i=state.questionStates.findIndex(function(s){return update.question.Id===s.question.Id;});// Don't process if change older than client's change\nif(i!==-1&&update.timeStamp<state.questionStates[i].timeStamp){return;}switch(update.change){case'INSERT':if(i===-1){state.questionStates=state.questionStates.concat([{question:pickQuestionProperties(update.question),timeStamp:update.timeStamp,removed:false}]);}else{state.questionStates[i].timeStamp=update.timeStamp;}break;case'MODIFY':if(i===-1){state.questionStates=state.questionStates.concat([{question:pickQuestionProperties(update.question),timeStamp:update.timeStamp,removed:false}]);}else{state.questionStates[i].timeStamp=update.timeStamp;state.questionStates[i].question=pickQuestionProperties(update.question);}break;case'REMOVE':if(i===-1){state.questionStates=state.questionStates.concat([{question:pickQuestionProperties(update.question),timeStamp:update.timeStamp,removed:true}]);}else{state.questionStates[i].timeStamp=update.timeStamp;state.questionStates[i].removed=true;}break;default:return;}});return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{questionStates:state.questionStates.sort(sortByVote)});case SERVER_SET_QUESTIONS_ACTION:return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{questionStates:action.questions.map(function(q){return{question:pickQuestionProperties(q),timeStamp:0,removed:false};}).sort(sortByVote)});default:throw new Error('unexpected action type');}};var QuestionProvider_initialState={questionStates:[]};var QuestionProvider_QuestionProvider=function QuestionProvider(_ref2){var children=_ref2.children;var value=react_default.a.useReducer(QuestionProvider_reducer,QuestionProvider_initialState);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(providers_QuestionContext.Provider,{value:value,children:children});};/* harmony default export */ var providers_QuestionProvider = (QuestionProvider_QuestionProvider);\n// CONCATENATED MODULE: ./src/providers/PlayerMetadataContext.js\nvar PlayerMetadataContext=/*#__PURE__*/react_default.a.createContext();/* harmony default export */ var providers_PlayerMetadataContext = (PlayerMetadataContext);\n// CONCATENATED MODULE: ./src/providers/PlayerMetadataProvider.js\nvar SET_CURRENT_QUESTION_ACTION='SET_CURRENT_QUESTION_ACTION';var PlayerMetadataProvider_reducer=function reducer(state,action){switch(action.type){case SET_CURRENT_QUESTION_ACTION:return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{currentQuestion:action.question});default:throw new Error('unexpected action type');}};var PlayerMetadataProvider_initialState={currentQuestion:null};var PlayerMetadataProvider_PlayerMetadataProvider=function PlayerMetadataProvider(_ref){var children=_ref.children;var value=react_default.a.useReducer(PlayerMetadataProvider_reducer,PlayerMetadataProvider_initialState);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(providers_PlayerMetadataContext.Provider,{value:value,children:children});};/* harmony default export */ var providers_PlayerMetadataProvider = (PlayerMetadataProvider_PlayerMetadataProvider);\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(78);\n\n// CONCATENATED MODULE: ./src/providers/VoteContext.js\nvar VoteContext=/*#__PURE__*/react_default.a.createContext();/* harmony default export */ var providers_VoteContext = (VoteContext);\n// CONCATENATED MODULE: ./src/providers/VoteProvider.js\nvar ADD_VOTE_ACTION='ADD_VOTE_ACTION';var DELETE_VOTE_ACTION='DELETE_VOTE_ACTION';var VoteProvider_SET_VOTES_ACTION='SET_VOTES_ACTION';var CLEAR_VOTES_ACTION='CLEAR_VOTES_ACTION';var VoteProvider_reducer=function reducer(state,action){switch(action.type){case ADD_VOTE_ACTION:return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{questionIdMap:Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state.questionIdMap),{},Object(defineProperty[\"a\" /* default */])({},action.questionId,true))});case DELETE_VOTE_ACTION:var newQuestionIdMap=state.questionIdMap;delete newQuestionIdMap[action.questionId];return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{questionIdMap:Object(objectSpread2[\"a\" /* default */])({},newQuestionIdMap)});case VoteProvider_SET_VOTES_ACTION:return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{questionIdMap:action.questionIdMap});case CLEAR_VOTES_ACTION:return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},state),{},{questionIdMap:{}});default:throw new Error('unexpected action type');}};var VoteProvider_initialState={questionIdMap:{}};var VoteProvider_VoteProvider=function VoteProvider(_ref){var children=_ref.children;var value=react_default.a.useReducer(VoteProvider_reducer,VoteProvider_initialState);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(providers_VoteContext.Provider,{value:value,children:children});};/* harmony default export */ var providers_VoteProvider = (VoteProvider_VoteProvider);\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(200);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(201);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js + 1 modules\nvar inherits = __webpack_require__(205);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 5 modules\nvar createSuper = __webpack_require__(204);\n\n// CONCATENATED MODULE: ./src/WebSocketClient.js\nvar WebSocketClient_WebSocketClient=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(WebSocketClient,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(WebSocketClient);function WebSocketClient(){var _this;Object(classCallCheck[\"a\" /* default */])(this,WebSocketClient);_this=_super.call(this);_this.channelArn='';return _this;}Object(createClass[\"a\" /* default */])(WebSocketClient,[{key:\"setupWebSocket\",value:function setupWebSocket(channelArn){var _this2=this;if(this.channelArn===channelArn){return;}this.channelArn=channelArn;var webSocketUrl=WEBSOCKET_API_ENDPOINT+\"?channelarn=\"+channelArn;this.ws=new WebSocket(webSocketUrl);this.ws.onmessage=function(msg){var _this2$context=Object(slicedToArray[\"a\" /* default */])(_this2.context,2),dispatch=_this2$context[1];var message=JSON.parse(msg.data);switch(message.type){case'INITIAL_STATE':console.debug('INIT STATE',message.questions);dispatch({type:SERVER_SET_QUESTIONS_ACTION,questions:message.questions});break;case'UPDATES':console.debug('UPDATE',message.updates);dispatch({type:SERVER_UPDATE_QUESTIONS_ACTION,updates:message.updates});break;default:return;}};}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(providers_IVSContext.Consumer,{children:function children(_ref){var channelArn=_ref.channelArn;return _this3.setupWebSocket(channelArn);}});}}]);return WebSocketClient;}(react_default.a.Component);WebSocketClient_WebSocketClient.contextType=providers_QuestionContext;/* harmony default export */ var src_WebSocketClient = (WebSocketClient_WebSocketClient);\n// CONCATENATED MODULE: ./src/player/CurrentQuestion.js\nfunction CurrentQuestion(){var _React$useContext=react_default.a.useContext(providers_QuestionContext),_React$useContext2=Object(slicedToArray[\"a\" /* default */])(_React$useContext,1),questionStates=_React$useContext2[0].questionStates;var _React$useContext3=react_default.a.useContext(providers_PlayerMetadataContext),_React$useContext4=Object(slicedToArray[\"a\" /* default */])(_React$useContext3,1),playerCurrentQuestion=_React$useContext4[0].currentQuestion;var showCurrentQuestion=true;var content;var votes;if(playerCurrentQuestion===null){var index=questionStates.findIndex(function(_ref){var question=_ref.question;return question.Current;});if(index===-1){showCurrentQuestion=false;}else{content=questionStates[index].question.Content;votes=questionStates[index].question.Votes;}}else{content=playerCurrentQuestion.Content;votes=playerCurrentQuestion.Votes;}return showCurrentQuestion?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"current-question\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"c-item\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"c-item__card\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"c-item__votes\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"svg\",{className:\"upvote-btn__svg\",width:\"22\",height:\"22\",viewBox:\"0 0 22 22\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"path\",{d:\"M3.66797 11L4.96047 12.2925L10.0846 7.1775V18.3333H11.918V7.1775L17.033 12.3017L18.3346 11L11.0013 3.66666L3.66797 11Z\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"upvote-btn__count\",children:votes})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"c-item__content\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"strong\",{children:\"Current question\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:content})]})]})})}):null;}/* harmony default export */ var player_CurrentQuestion = (CurrentQuestion);\n// CONCATENATED MODULE: ./src/player/Player.js\nfunction Player(){var _React$useContext=react_default.a.useContext(providers_IVSContext),playbackUrl=_React$useContext.playbackUrl;var _React$useContext2=react_default.a.useContext(providers_PlayerMetadataContext),_React$useContext3=Object(slicedToArray[\"a\" /* default */])(_React$useContext2,2),dispatch=_React$useContext3[1];react_default.a.useEffect(function(){// eslint-disable-next-line no-undef\nvar videojs=window.videojs,registerIVSTech=window.registerIVSTech,registerIVSQualityPlugin=window.registerIVSQualityPlugin;// Set up IVS playback tech and quality plugin\nvar IVSPlugin=videojs.getPlugin(\"getIVSPlayer\");// If the plugins haven't been loaded, load them.\nif(!IVSPlugin){registerIVSTech(videojs);registerIVSQualityPlugin(videojs);}var videoJsOptions={techOrder:[\"AmazonIVS\"],autoplay:true,muted:true};// instantiate video.js\nvar player=videojs(\"amazon-ivs-videojs\",videoJsOptions);var ivsPlayer=player.getIVSPlayer();var PlayerEventType=player.getIVSEvents().PlayerEventType;ivsPlayer.addEventListener(PlayerEventType.TEXT_METADATA_CUE,function(cue){var metadataText=cue.text;console.log('Timed metadata: ',metadataText);dispatch({type:SET_CURRENT_QUESTION_ACTION,question:JSON.parse(metadataText)});});player.ready(function(){player.enableIVSQualityPlugin();player.src(playbackUrl);player.play();});return function(){player.dispose();};// eslint-disable-next-line\n},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"player-wrapper\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(player_CurrentQuestion,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{\"data-vjs-player\":true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{id:\"amazon-ivs-videojs\",className:\"video-js vjs-fluid\",playsInline:true})})]});}/* harmony default export */ var player_Player = (Player);\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(18);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(27);\n\n// CONCATENATED MODULE: ./src/questionList/Question/VoteButton.js\nvar ADD_VOTE_ENUM='ADD_VOTE';var DELETE_VOTE_ENUM='DELETE_VOTE';var NONE_ENUM='NONE';var DELETE_VOTE_ENDPOINT=HTTP_API_ENDPOINT+'/deleteVote';var ADD_VOTE_ENDPOINT=HTTP_API_ENDPOINT+'/addVote';function VoteButton(_ref){var votes=_ref.votes,questionId=_ref.questionId,disabled=_ref.disabled;var _React$useContext=react_default.a.useContext(providers_QuestionContext),_React$useContext2=Object(slicedToArray[\"a\" /* default */])(_React$useContext,2),questionDispatch=_React$useContext2[1];var _React$useContext3=react_default.a.useContext(providers_VoteContext),_React$useContext4=Object(slicedToArray[\"a\" /* default */])(_React$useContext3,2),questionIdMap=_React$useContext4[0].questionIdMap,voteDispatch=_React$useContext4[1];var _React$useContext5=react_default.a.useContext(providers_IVSContext),channelArn=_React$useContext5.channelArn;var _React$useContext6=react_default.a.useContext(providers_UserContext),_React$useContext7=Object(slicedToArray[\"a\" /* default */])(_React$useContext6,1),accessJWTToken=_React$useContext7[0].accessJWTToken;var _React$useState=react_default.a.useState(NONE_ENUM),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),postVoteType=_React$useState2[0],setPostVoteType=_React$useState2[1];react_default.a.useEffect(function(){if(postVoteType!==NONE_ENUM){var postVote=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var url,response;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;questionDispatch({type:postVoteType===DELETE_VOTE_ENUM?CLIENT_DECREMENT_VOTE_ACTION:CLIENT_INCREMENT_VOTE_ACTION,id:questionId});voteDispatch({type:postVoteType===DELETE_VOTE_ENUM?DELETE_VOTE_ACTION:ADD_VOTE_ACTION,questionId:questionId});url=postVoteType===DELETE_VOTE_ENUM?DELETE_VOTE_ENDPOINT:ADD_VOTE_ENDPOINT;_context.next=6;return fetch(url,{method:'POST',headers:{'Content-Type':'application/json','Authorization':accessJWTToken},body:JSON.stringify({channelArn:channelArn,questionId:questionId})});case 6:response=_context.sent;if(!(response.status!==200)){_context.next=9;break;}throw new Error();case 9:_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log('Failed to add/delete vote',_context.t0);questionDispatch({type:postVoteType===DELETE_VOTE_ENUM?CLIENT_INCREMENT_VOTE_ACTION:CLIENT_DECREMENT_VOTE_ACTION,id:questionId});voteDispatch({type:postVoteType===DELETE_VOTE_ENUM?ADD_VOTE_ACTION:DELETE_VOTE_ACTION,questionId:questionId});case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function postVote(){return _ref2.apply(this,arguments);};}();postVote();}// eslint-disable-next-line\n},[postVoteType]);var votedState=!!questionIdMap[questionId];var className='';if(votedState){className='btn rounded upvote-btn has-voted';}else if(disabled){className='btn rounded upvote-btn';}else{className='btn btn--primary rounded upvote-btn';}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\",{className:className,onClick:function onClick(){return setPostVoteType(votedState?DELETE_VOTE_ENUM:ADD_VOTE_ENUM);},disabled:disabled,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"svg\",{className:\"upvote-btn__svg\",width:\"22\",height:\"22\",viewBox:\"0 0 22 22\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"path\",{d:\"M3.66797 11L4.96047 12.2925L10.0846 7.1775V18.3333H11.918V7.1775L17.033 12.3017L18.3346 11L11.0013 3.66666L3.66797 11Z\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"upvote-btn__count\",children:votes})]});}/* harmony default export */ var Question_VoteButton = (VoteButton);\n// CONCATENATED MODULE: ./src/util/useOutsideClick.js\nfunction useOutsideClick(ref,onClick){react_default.a.useEffect(function(){function handleClickOutside(event){if(ref.current&&!ref.current.contains(event.target)){onClick();}}document.addEventListener(\"mousedown\",handleClickOutside);return function(){document.removeEventListener(\"mousedown\",handleClickOutside);};},[ref,onClick]);}/* harmony default export */ var util_useOutsideClick = (useOutsideClick);\n// CONCATENATED MODULE: ./src/questionList/Question/DeleteQuestionModal.js\nvar DELETE_QUESTION_ENDPOINT=HTTP_API_ENDPOINT+'/deleteQuestion';function DeleteQuestionModal(_ref){var questionId=_ref.questionId,onHideModal=_ref.onHideModal;var _React$useContext=react_default.a.useContext(providers_QuestionContext),_React$useContext2=Object(slicedToArray[\"a\" /* default */])(_React$useContext,2),dispatch=_React$useContext2[1];var _React$useContext3=react_default.a.useContext(providers_IVSContext),channelArn=_React$useContext3.channelArn;var _React$useContext4=react_default.a.useContext(providers_UserContext),_React$useContext5=Object(slicedToArray[\"a\" /* default */])(_React$useContext4,1),accessJWTToken=_React$useContext5[0].accessJWTToken;var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),isPosting=_React$useState2[0],setIsPosting=_React$useState2[1];var modalRef=react_default.a.useRef(null);util_useOutsideClick(modalRef,onHideModal);react_default.a.useEffect(function(){if(isPosting){var postDeleteQuestion=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var questionResponse;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(DELETE_QUESTION_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json','Authorization':accessJWTToken},body:JSON.stringify({channelArn:channelArn,id:questionId})});case 3:questionResponse=_context.sent;if(!(questionResponse.status===200)){_context.next=8;break;}dispatch({type:CLIENT_DELETE_QUESTION_ACTION,id:questionId});_context.next=9;break;case 8:throw new Error();case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log('Failure in deleting question',_context.t0);case 14:onHideModal();case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function postDeleteQuestion(){return _ref2.apply(this,arguments);};}();postDeleteQuestion();}// eslint-disable-next-line\n},[isPosting]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"modal\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"modal__el\",ref:modalRef,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{className:\"mg-b-1\",children:\"Are you sure you want to delete this question?\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"grid grid--responsive grid--2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:'button',className:\"btn btn--secondary mg-t-1\",onClick:onHideModal,children:\"Cancel\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:'button',className:\"btn btn--destruct mg-t-1\",onClick:function onClick(){return setIsPosting(true);},children:\"Delete\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"modal__overlay\"})]});}/* harmony default export */ var Question_DeleteQuestionModal = (DeleteQuestionModal);\n// CONCATENATED MODULE: ./src/questionList/Question/DeleteQuestionButton.js\nfunction DeleteQuestionButton(_ref){var questionId=_ref.questionId;var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),modalVisible=_React$useState2[0],setModalVisibility=_React$useState2[1];var showModal=function showModal(){return setModalVisibility(true);};var hideModal=function hideModal(){return setModalVisibility(false);};var modal=modalVisible?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Question_DeleteQuestionModal,{questionId:questionId,onHideModal:hideModal}):null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_default.a.Fragment,{children:[modal,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:showModal,className:\"btn btn--icon btn--destruct\",title:\"Delete\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"svg\",{className:\"icon icon--24 icon--inverted\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"path\",{d:\"M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM19 4H15.5L14.5 3H9.5L8.5 4H5V6H19V4Z\"})})})]});}/* harmony default export */ var Question_DeleteQuestionButton = (DeleteQuestionButton);\n// CONCATENATED MODULE: ./src/questionList/Question/CurrentQuestionModal.js\nvar CURRENT_QUESTION_ENDPOINT=HTTP_API_ENDPOINT+'/setCurrentQuestion';function CurrentQuestionModal(_ref){var questionId=_ref.questionId,onHideModal=_ref.onHideModal;var _React$useContext=react_default.a.useContext(providers_IVSContext),channelArn=_React$useContext.channelArn;var _React$useContext2=react_default.a.useContext(providers_UserContext),_React$useContext3=Object(slicedToArray[\"a\" /* default */])(_React$useContext2,1),accessJWTToken=_React$useContext3[0].accessJWTToken;var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),isPosting=_React$useState2[0],setIsPosting=_React$useState2[1];var modalRef=react_default.a.useRef(null);util_useOutsideClick(modalRef,onHideModal);react_default.a.useEffect(function(){if(isPosting){var postCurrentQuestion=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var questionResponse;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(CURRENT_QUESTION_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json','Authorization':accessJWTToken},body:JSON.stringify({channelArn:channelArn,id:questionId})});case 3:questionResponse=_context.sent;if(!(questionResponse.status!==200)){_context.next=6;break;}throw new Error();case 6:_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log('Failure in setting current question',_context.t0);case 11:onHideModal();case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function postCurrentQuestion(){return _ref2.apply(this,arguments);};}();postCurrentQuestion();}// eslint-disable-next-line\n},[isPosting]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"modal\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"modal__el\",ref:modalRef,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{className:\"mg-b-1\",children:\"Mark this question as current?\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"grid grid--responsive grid--2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:'button',className:\"btn btn--secondary mg-t-1\",onClick:onHideModal,children:\"Cancel\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:'button',className:\"btn btn--confirm mg-t-1\",onClick:function onClick(){return setIsPosting(true);},children:\"Mark as current\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"modal__overlay\"})]});}/* harmony default export */ var Question_CurrentQuestionModal = (CurrentQuestionModal);\n// CONCATENATED MODULE: ./src/questionList/Question/CurrentQuestionButton.js\nfunction CurrentQuestionButton(_ref){var questionId=_ref.questionId;var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),modalVisible=_React$useState2[0],setModalVisibility=_React$useState2[1];var showModal=function showModal(){return setModalVisibility(true);};var hideModal=function hideModal(){return setModalVisibility(false);};var modal=modalVisible?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Question_CurrentQuestionModal,{questionId:questionId,onHideModal:hideModal}):null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_default.a.Fragment,{children:[modal,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:showModal,className:\"btn btn--icon btn--confirm\",title:\"Mark as current\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"svg\",{className:\"icon icon--24\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"path\",{d:\"M18.99 20.4998L19 9.49976C19 8.82976 18.67 8.22976 18.16 7.86976L12 3.49976L5.84 7.86976C5.33 8.22976 5 8.82976 5 9.49976L5.01 20.4998L12 15.6598L18.99 20.4998Z\"})})})]});}/* harmony default export */ var Question_CurrentQuestionButton = (CurrentQuestionButton);\n// CONCATENATED MODULE: ./src/questionList/Question/Question.js\nfunction Question(_ref){var content=_ref.content,id=_ref.id,votes=_ref.votes;var _React$useContext=react_default.a.useContext(providers_UserContext),_React$useContext2=Object(slicedToArray[\"a\" /* default */])(_React$useContext,1),_React$useContext2$=_React$useContext2[0],isSignedIn=_React$useContext2$.isSignedIn,isModerator=_React$useContext2$.isModerator;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"q-item\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"q-item__card\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Question_VoteButton,{votes:votes,questionId:id,disabled:!isSignedIn}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"q-item__content\",children:content})]}),isModerator&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"q-item__moderation\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Question_CurrentQuestionButton,{questionId:id}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Question_DeleteQuestionButton,{questionId:id})]})]});}/* harmony default export */ var Question_Question = (Question);\n// CONCATENATED MODULE: ./src/questionList/QuestionList.js\nfunction shouldShowQuestion(questionState,playerCurrentQuestion){if(questionState.removed||questionState.question.Answered){return false;}if(questionState.question.Current){if(playerCurrentQuestion===null||playerCurrentQuestion.Id===questionState.question.Id){return false;}}return true;}function QuestionList(){var _React$useContext=react_default.a.useContext(providers_QuestionContext),_React$useContext2=Object(slicedToArray[\"a\" /* default */])(_React$useContext,1),questionStates=_React$useContext2[0].questionStates;var _React$useContext3=react_default.a.useContext(providers_PlayerMetadataContext),_React$useContext4=Object(slicedToArray[\"a\" /* default */])(_React$useContext3,1),playerCurrentQuestion=_React$useContext4[0].currentQuestion;var questionComponents=[];questionStates.forEach(function(s){if(shouldShowQuestion(s,playerCurrentQuestion)){questionComponents.push(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Question_Question,{content:s.question.Content,votes:s.question.Votes,id:s.question.Id},\"\".concat(s.question.Id)));}});return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"questions\",children:questionComponents});}/* harmony default export */ var questionList_QuestionList = (QuestionList);\n// CONCATENATED MODULE: ./src/addQuestion/AddQuestionModal.js\nvar ADD_QUESTION_ENDPOINT=HTTP_API_ENDPOINT+'/addQuestion';var AddQuestionModal_ADD_VOTE_ENDPOINT=HTTP_API_ENDPOINT+'/addVote';function AddQuestionModal(_ref){var onHideModal=_ref.onHideModal;var _React$useContext=react_default.a.useContext(providers_QuestionContext),_React$useContext2=Object(slicedToArray[\"a\" /* default */])(_React$useContext,2),questionDispatch=_React$useContext2[1];var _React$useContext3=react_default.a.useContext(providers_VoteContext),_React$useContext4=Object(slicedToArray[\"a\" /* default */])(_React$useContext3,2),voteDispatch=_React$useContext4[1];var _React$useContext5=react_default.a.useContext(providers_IVSContext),channelArn=_React$useContext5.channelArn;var _React$useContext6=react_default.a.useContext(providers_UserContext),_React$useContext7=Object(slicedToArray[\"a\" /* default */])(_React$useContext6,1),accessJWTToken=_React$useContext7[0].accessJWTToken;var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),isPosting=_React$useState2[0],setIsPosting=_React$useState2[1];var _React$useState3=react_default.a.useState(''),_React$useState4=Object(slicedToArray[\"a\" /* default */])(_React$useState3,2),textInput=_React$useState4[0],setTextInput=_React$useState4[1];var modalRef=react_default.a.useRef(null);util_useOutsideClick(modalRef,onHideModal);react_default.a.useEffect(function(){if(isPosting){var postAddQuestion=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var questionResponse,_yield$questionRespon,id,voteResponse;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(ADD_QUESTION_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json','Authorization':accessJWTToken},body:JSON.stringify({channelArn:channelArn,question:textInput})});case 3:questionResponse=_context.sent;if(!(questionResponse.status===200)){_context.next=16;break;}_context.next=7;return questionResponse.json();case 7:_yield$questionRespon=_context.sent;id=_yield$questionRespon.id;questionDispatch({type:CLIENT_ADD_QUESTION_ACTION,id:id,content:textInput});_context.next=12;return fetch(AddQuestionModal_ADD_VOTE_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json','Authorization':accessJWTToken},body:JSON.stringify({channelArn:channelArn,questionId:id})});case 12:voteResponse=_context.sent;if(voteResponse.status===200){questionDispatch({type:CLIENT_INCREMENT_VOTE_ACTION,id:id});voteDispatch({type:ADD_VOTE_ACTION,questionId:id});}_context.next=17;break;case 16:throw new Error();case 17:_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](0);console.log('Failure in adding and voting new question',_context.t0);case 22:onHideModal();case 23:case\"end\":return _context.stop();}}},_callee,null,[[0,19]]);}));return function postAddQuestion(){return _ref2.apply(this,arguments);};}();postAddQuestion();}// eslint-disable-next-line\n},[isPosting]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"modal\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"modal__el\",ref:modalRef,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{className:\"mg-b-1\",children:\"Submit a question\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"form\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"fieldset\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{rows:'8',placeholder:'Type here...',onChange:function onChange(e){return setTextInput(e.target.value);},disabled:isPosting,value:textInput}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"em\",{children:\"Submissions are anonymous\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:'submit',className:\"btn btn--primary mg-t-1\",onClick:function onClick(e){e.preventDefault();setIsPosting(true);},children:\"Submit\"})]})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"modal__overlay\"})]});}/* harmony default export */ var addQuestion_AddQuestionModal = (AddQuestionModal);\n// CONCATENATED MODULE: ./src/addQuestion/AddQuestionButton.js\nfunction AddQuestionButton(){var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),modalVisible=_React$useState2[0],setModalVisibility=_React$useState2[1];var _React$useContext=react_default.a.useContext(providers_UserContext),_React$useContext2=Object(slicedToArray[\"a\" /* default */])(_React$useContext,1),isSignedIn=_React$useContext2[0].isSignedIn;var showModal=function showModal(){return setModalVisibility(true);};var hideModal=function hideModal(){return setModalVisibility(false);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_default.a.Fragment,{children:[modalVisible?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(addQuestion_AddQuestionModal,{onHideModal:hideModal}):null,isSignedIn?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:showModal,className:\"btn btn--floating btn--fixed\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"path\",{d:\"M0 0h24v24H0z\",fill:\"none\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"path\",{d:\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"})]})}):null]});}/* harmony default export */ var addQuestion_AddQuestionButton = (AddQuestionButton);\n// EXTERNAL MODULE: ./node_modules/aws-amplify-react/lib-esm/index.js + 41 modules\nvar aws_amplify_react_lib_esm = __webpack_require__(55);\n\n// CONCATENATED MODULE: ./src/auth/SignInModal.js\nfunction SignInModal(_ref){var onHideModal=_ref.onHideModal;var modalRef=react_default.a.useRef(null);util_useOutsideClick(modalRef,onHideModal);var handleAuthStateChange=function handleAuthStateChange(state){if(state==='signedIn'){onHideModal();}};var MyTheme={sectionHeaderContent:{fontSize:'2.4rem',fontWeight:'bold'},sectionBody:{'width':'100%','margin':'2rem 0','display':'flex',flexDirection:'column',flexGrow:'1'},formField:{'margin':'0.5rem 0'},input:{'width':'100%'},a:{fontWeight:'bold','cursor':'pointer',paddingLeft:'0.5rem'},sectionFooter:{'width':'100%'},sectionFooterPrimaryContent:{'display':'flex'},button:{'display':'flex','width':'100%',alignItems:'center',alignContent:'center',justifyContent:'center',fontWeight:'bold','color':'var(--color-text-inverted)','background':'var(--color-bg-button-primary-default)'},selectInput:{'display':'grid',gridTemplateColumns:'auto 1fr','gridGap':'1rem'},sectionFooterSecondaryContent:{'display':'flex','margin':'1rem 0 0 0'}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"modal\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"modal__el modal__el--auth\",ref:modalRef,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(aws_amplify_react_lib_esm[\"a\" /* Authenticator */],{theme:MyTheme,hideDefault:true,onStateChange:handleAuthStateChange,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(aws_amplify_react_lib_esm[\"d\" /* SignIn */],{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(aws_amplify_react_lib_esm[\"e\" /* SignUp */],{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(aws_amplify_react_lib_esm[\"b\" /* ConfirmSignUp */],{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(aws_amplify_react_lib_esm[\"c\" /* Greetings */],{})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"modal__overlay\"})]});}/* harmony default export */ var auth_SignInModal = (SignInModal);\n// EXTERNAL MODULE: ./node_modules/@aws-amplify/auth/lib-esm/Auth.js + 31 modules\nvar Auth = __webpack_require__(203);\n\n// EXTERNAL MODULE: ./node_modules/@aws-amplify/core/lib-esm/Hub.js\nvar Hub = __webpack_require__(330);\n\n// CONCATENATED MODULE: ./src/auth/SignInButton.js\nvar GET_VOTES_ENDPOINT=HTTP_API_ENDPOINT+'/getVotes';function fetchSetUserInfoVotes(_x,_x2,_x3,_x4){return _fetchSetUserInfoVotes.apply(this,arguments);}function _fetchSetUserInfoVotes(){_fetchSetUserInfoVotes=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(userDispatch,voteDispatch,signInUserSession,channelArn){var votesResponse,votes,questionIdMap;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:userDispatch({type:SET_SIGNED_IN_USER_ACTION,isModerator:getModeratorStatusFromSession(signInUserSession),accessJWTToken:signInUserSession.accessToken.jwtToken});_context2.next=3;return fetch(GET_VOTES_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json','Authorization':signInUserSession.accessToken.jwtToken},body:JSON.stringify({channelArn:channelArn})});case 3:votesResponse=_context2.sent;if(!(votesResponse.status===200)){_context2.next=10;break;}_context2.next=7;return votesResponse.json();case 7:votes=_context2.sent;questionIdMap=votes.reduce(function(map,v){map[v.QuestionId]=true;return map;},{});voteDispatch({type:VoteProvider_SET_VOTES_ACTION,questionIdMap:questionIdMap});case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchSetUserInfoVotes.apply(this,arguments);}function getModeratorStatusFromSession(session){var userGroups=session.idToken.payload['cognito:groups'];if(userGroups!==undefined&&userGroups.indexOf('moderator')!==-1){return true;}else{return false;}}function SignInButton(){var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),modalVisible=_React$useState2[0],setModalVisibility=_React$useState2[1];var _React$useContext=react_default.a.useContext(providers_UserContext),_React$useContext2=Object(slicedToArray[\"a\" /* default */])(_React$useContext,2),isSignedIn=_React$useContext2[0].isSignedIn,userDispatch=_React$useContext2[1];var _React$useContext3=react_default.a.useContext(providers_IVSContext),channelArn=_React$useContext3.channelArn;var _React$useContext4=react_default.a.useContext(providers_VoteContext),_React$useContext5=Object(slicedToArray[\"a\" /* default */])(_React$useContext4,2),voteDispatch=_React$useContext5[1];var showModal=function showModal(){return setModalVisibility(true);};var hideModal=function hideModal(){return setModalVisibility(false);};var handleClick=function handleClick(){if(isSignedIn){Auth[\"a\" /* Auth */].signOut();}else{showModal();}};react_default.a.useEffect(function(){function setAuthListeners(){return _setAuthListeners.apply(this,arguments);}function _setAuthListeners(){_setAuthListeners=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var user;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Hub[\"a\" /* Hub */].listen('auth',function(_ref){var payload=_ref.payload;switch(payload.event){case'signIn':fetchSetUserInfoVotes(userDispatch,voteDispatch,payload.data.signInUserSession,channelArn);break;default:// case: 'signOut'\nuserDispatch({type:SET_SIGNED_OUT_USER_ACTION});voteDispatch({type:CLEAR_VOTES_ACTION});break;}});_context.prev=1;_context.next=4;return Auth[\"a\" /* Auth */].currentAuthenticatedUser();case 4:user=_context.sent;fetchSetUserInfoVotes(userDispatch,voteDispatch,user.signInUserSession,channelArn);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);userDispatch({type:SET_SIGNED_OUT_USER_ACTION});voteDispatch({type:CLEAR_VOTES_ACTION});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return _setAuthListeners.apply(this,arguments);}setAuthListeners();// eslint-disable-next-line\n},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_default.a.Fragment,{children:[modalVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(auth_SignInModal,{onHideModal:hideModal}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:isSignedIn?'btn':'btn btn--primary',onClick:handleClick,children:isSignedIn?'Sign out':'Sign in'})]});}/* harmony default export */ var auth_SignInButton = (SignInButton);\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(379);\n\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(providers_IVSProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(providers_PlayerMetadataProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(providers_VoteProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(providers_QuestionProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(providers_UserProvider,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_WebSocketClient,{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"header\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Interactive Live Q&A\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(auth_SignInButton,{})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"section\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(player_Player,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(questionList_QuestionList,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(addQuestion_AddQuestionButton,{})]})]})})})})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/ // <React.StrictMode>\nObject(jsx_runtime[\"jsx\"])(src_App,{}),// </React.StrictMode>,\ndocument.getElementById('root'));\n\n/***/ })\n\n},[[380,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/postcss-loader/src/index.js??postcss!/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/index.css","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/hash-base/node_modules/readable-stream/lib util","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/hash-base/node_modules/readable-stream/lib/internal/streams util","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/readable-stream/lib util","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/readable-stream/lib/internal/streams util","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/diffie-hellman/node_modules/bn.js/lib buffer","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/miller-rabin/node_modules/bn.js/lib buffer","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/brorand crypto","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/browserify-sign/node_modules/readable-stream/lib util","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams util","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/bn.js/lib buffer","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/elliptic/node_modules/bn.js/lib buffer","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/asn1.js/node_modules/bn.js/lib buffer","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/create-ecdh/node_modules/bn.js/lib buffer","ignored /Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/public-encrypt/node_modules/bn.js/lib buffer","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/node_modules/postcss-loader/src/index.js??postcss!/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/App.css","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/config.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/auth/AuthConfigure.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/providers/IVSContext.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/providers/IVSProvider.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/providers/UserContext.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/providers/UserProvider.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/providers/QuestionContext.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/providers/QuestionProvider.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/providers/PlayerMetadataContext.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/providers/PlayerMetadataProvider.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/providers/VoteContext.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/providers/VoteProvider.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/WebSocketClient.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/player/CurrentQuestion.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/player/Player.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/questionList/Question/VoteButton.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/util/useOutsideClick.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/questionList/Question/DeleteQuestionModal.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/questionList/Question/DeleteQuestionButton.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/questionList/Question/CurrentQuestionModal.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/questionList/Question/CurrentQuestionButton.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/questionList/Question/Question.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/questionList/QuestionList.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/addQuestion/AddQuestionModal.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/addQuestion/AddQuestionButton.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/auth/SignInModal.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/auth/SignInButton.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/App.js","/Users/duyennguyen/STREAMING/amazon-ivs-virtual-qa-web-demo/frontend/src/index.js"],"names":["getValueFromStackOutput","key","index","backendStackOutput","findIndex","o","OutputKey","OutputValue","HTTP_API_ENDPOINT","WEBSOCKET_API_ENDPOINT","COGNITO_USER_POOL_ID","COGNITO_USER_POOL_CLIENT_ID","REGION","Amplify","configure","Auth","region","userPoolId","userPoolWebClientId","authenticationFlowType","IVSContext","React","createContext","getQueryStringValue","decodeURIComponent","window","location","search","replace","RegExp","encodeURIComponent","IVSProvider","children","value","channelArn","atob","playbackUrl","UserContext","SET_SIGNED_IN_USER_ACTION","SET_SIGNED_OUT_USER_ACTION","reducer","state","action","type","isSignedIn","isModerator","accessJWTToken","initialState","Error","accessToken","UserProvider","useReducer","QuestionContext","CLIENT_ADD_QUESTION_ACTION","CLIENT_DELETE_QUESTION_ACTION","CLIENT_INCREMENT_VOTE_ACTION","CLIENT_DECREMENT_VOTE_ACTION","SERVER_UPDATE_QUESTIONS_ACTION","SERVER_SET_QUESTIONS_ACTION","SET_VOTES_ACTION","pickQuestionProperties","Id","Content","Votes","Answered","Current","sortByVote","questionState1","questionState2","question","newQuestionState","id","content","timeStamp","removed","questionStates","concat","sort","map","s","updates","forEach","update","i","change","questions","q","QuestionProvider","PlayerMetadataContext","SET_CURRENT_QUESTION_ACTION","currentQuestion","PlayerMetadataProvider","VoteContext","ADD_VOTE_ACTION","DELETE_VOTE_ACTION","CLEAR_VOTES_ACTION","questionIdMap","questionId","newQuestionIdMap","VoteProvider","WebSocketClient","webSocketUrl","ws","WebSocket","onmessage","msg","context","dispatch","message","JSON","parse","data","console","debug","setupWebSocket","Component","contextType","QuestionsContext","CurrentQuestion","useContext","playerCurrentQuestion","showCurrentQuestion","votes","Player","useEffect","videojs","registerIVSTech","registerIVSQualityPlugin","IVSPlugin","getPlugin","videoJsOptions","techOrder","autoplay","muted","player","ivsPlayer","getIVSPlayer","PlayerEventType","getIVSEvents","addEventListener","TEXT_METADATA_CUE","cue","metadataText","text","log","ready","enableIVSQualityPlugin","src","play","dispose","ADD_VOTE_ENUM","DELETE_VOTE_ENUM","NONE_ENUM","DELETE_VOTE_ENDPOINT","ADD_VOTE_ENDPOINT","VoteButton","disabled","questionDispatch","voteDispatch","useState","postVoteType","setPostVoteType","postVote","url","fetch","method","headers","body","stringify","response","status","votedState","className","useOutsideClick","ref","onClick","handleClickOutside","event","current","contains","target","document","removeEventListener","DELETE_QUESTION_ENDPOINT","DeleteQuestionModal","onHideModal","isPosting","setIsPosting","modalRef","useRef","postDeleteQuestion","questionResponse","DeleteQuestionButton","modalVisible","setModalVisibility","showModal","hideModal","modal","CURRENT_QUESTION_ENDPOINT","CurrentQuestionModal","postCurrentQuestion","CurrentQuestionButton","Question","shouldShowQuestion","questionState","QuestionList","questionComponents","push","ADD_QUESTION_ENDPOINT","AddQuestionModal","textInput","setTextInput","postAddQuestion","json","voteResponse","e","preventDefault","AddQuestionButton","SignInModal","handleAuthStateChange","MyTheme","sectionHeaderContent","fontSize","fontWeight","sectionBody","flexDirection","flexGrow","formField","input","a","paddingLeft","sectionFooter","sectionFooterPrimaryContent","button","alignItems","alignContent","justifyContent","selectInput","gridTemplateColumns","sectionFooterSecondaryContent","GET_VOTES_ENDPOINT","fetchSetUserInfoVotes","userDispatch","signInUserSession","getModeratorStatusFromSession","jwtToken","votesResponse","reduce","v","QuestionId","session","userGroups","idToken","payload","undefined","indexOf","SignInButton","handleClick","signOut","setAuthListeners","Hub","listen","currentAuthenticatedUser","user","App","ReactDOM","render","getElementById"],"mappings":";;;;;;;;;;;;AAAA,uC;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEA;AACA;AACA;AACA;AACA;AAEA,QAASA,wBAAT,CAAiCC,GAAjC,CAAsC,CAClC,GAAMC,MAAK,CAAGC,kBAAkB,CAAC,CAAD,CAAlB,CAAsBC,SAAtB,CAAgC,SAAAC,CAAC,QAAIA,EAAC,CAACC,SAAF,GAAgBL,GAApB,EAAjC,CAAd,CACA,MAAOE,mBAAkB,CAAC,CAAD,CAAlB,CAAsBD,KAAtB,EAA6BK,WAApC,CACH,CAEM,GAAMC,kBAAiB,CAAGR,uBAAuB,CAAC,iBAAD,CAAjD,CACA,GAAMS,uBAAsB,CAAGT,uBAAuB,CAAC,sBAAD,CAAtD,CACA,GAAMU,qBAAoB,CAAGV,uBAAuB,CAAC,mBAAD,CAApD,CACA,GAAMW,4BAA2B,CAAGX,uBAAuB,CAAC,iBAAD,CAA3D,CACA,GAAMY,OAAM,CAAGZ,uBAAuB,CAAC,QAAD,CAAtC,C;;ACVPa,kBAAO,CAACC,SAAR,CAAkB,CACdC,IAAI,CAAE,CACFC,MAAM,CAAEJ,MADN,CAEFK,UAAU,CAAEP,oBAFV,CAGFQ,mBAAmB,CAAEP,2BAHnB,CAIFQ,sBAAsB,CAAE,oBAJtB,CADQ,CAAlB,E;;ACLA,GAAMC,WAAU,cAAGC,eAAK,CAACC,aAAN,EAAnB,CAEeF,mEAAf,E;;;;;ACDA,QAASG,oBAAT,CAA8BtB,GAA9B,CAAmC,CAC/B,MAAOuB,mBAAkB,CAACC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,OAAvB,CAA+B,GAAIC,OAAJ,CAAW,eAAiBC,kBAAkB,CAAC7B,GAAD,CAAlB,CAAwB2B,OAAxB,CAAgC,QAAhC,CAA0C,MAA1C,CAAjB,CAAqE,sBAAhF,CAAwG,GAAxG,CAA/B,CAA6I,IAA7I,CAAD,CAAzB,CACH,CAED,GAAMG,wBAAW,CAAG,QAAdA,YAAc,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAClC,GAAMC,MAAK,CAAG,CACVC,UAAU,CAAET,MAAM,CAACU,IAAP,CAAYZ,mBAAmB,CAAC,SAAD,CAA/B,CADF,CAEVa,WAAW,CAAEX,MAAM,CAACU,IAAP,CAAYZ,mBAAmB,CAAC,UAAD,CAA/B,CAFH,CAAd,CAKA,mBACI,2BAAC,oBAAD,CAAY,QAAZ,EAAqB,KAAK,CAAEU,KAA5B,UACKD,QADL,EADJ,CAKH,CAXD,CAaeD,iFAAf,E;;;;;AClBA,GAAMM,YAAW,cAAGhB,eAAK,CAACC,aAAN,EAApB,CAEee,qEAAf,E;;ACDO,GAAMC,0BAAyB,CAAG,2BAAlC,CACA,GAAMC,2BAA0B,CAAG,4BAAnC,CAEP,GAAMC,qBAAO,CAAG,QAAVA,QAAU,CAACC,KAAD,CAAQC,MAAR,CAAmB,CAC/B,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKL,0BAAL,CACI,OAAO,qFACAG,KADP,MAEIG,UAAU,CAAE,IAFhB,CAGIC,WAAW,CAAEH,MAAM,CAACG,WAHxB,CAIIC,cAAc,CAAEJ,MAAM,CAACI,cAJ3B,GAMJ,IAAKP,2BAAL,CACI,OAAO,4CAAKQ,YAAZ,EACJ,QACI,KAAM,IAAIC,MAAJ,CAAU,wBAAV,CAAN,CAXR,CAaH,CAdD,CAgBA,GAAMD,aAAY,CAAG,CACjBH,UAAU,CAAE,KADK,CAEjBC,WAAW,CAAE,KAFI,CAGjBI,WAAW,CAAE,EAHI,CAArB,CAMA,GAAMC,0BAAY,CAAG,QAAfA,aAAe,MAAkB,IAAflB,SAAe,MAAfA,QAAe,CACnC,GAAMC,MAAK,CAAGZ,eAAK,CAAC8B,UAAN,CAAiBX,oBAAjB,CAA0BO,YAA1B,CAAd,CACA,mBACI,2BAAC,qBAAD,CAAa,QAAb,EAAsB,KAAK,CAAEd,KAA7B,UACKD,QADL,EADJ,CAKH,CAPD,CASekB,oFAAf,E;;ACnCA,GAAME,gBAAe,cAAG/B,eAAK,CAACC,aAAN,EAAxB,CAEe8B,6EAAf,E;;ACDO,GAAMC,2BAA0B,CAAG,4BAAnC,CACA,GAAMC,8BAA6B,CAAG,+BAAtC,CACA,GAAMC,6BAA4B,CAAG,8BAArC,CACA,GAAMC,6BAA4B,CAAG,8BAArC,CAEA,GAAMC,+BAA8B,CAAG,gCAAvC,CACA,GAAMC,4BAA2B,CAAG,6BAApC,CAEA,GAAMC,iBAAgB,CAAG,kBAAzB,CAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAASC,uBAAT,MAEG,IADCC,GACD,MADCA,EACD,CADKC,OACL,MADKA,OACL,CADcC,KACd,MADcA,KACd,CADqBC,QACrB,MADqBA,QACrB,CAD+BC,OAC/B,MAD+BA,OAC/B,CACC,MAAO,CACHJ,EAAE,CAAFA,EADG,CACCC,OAAO,CAAPA,OADD,CACUC,KAAK,CAALA,KADV,CACiBC,QAAQ,CAARA,QADjB,CAC2BC,OAAO,CAAPA,OAD3B,CAAP,CAGH,CAED,QAASC,WAAT,CAAoBC,cAApB,CAAoCC,cAApC,CAAoD,CAChD,MAAOA,eAAc,CAACC,QAAf,CAAwBN,KAAxB,CAAgCI,cAAc,CAACE,QAAf,CAAwBN,KAA/D,CACH,CAED,GAAMvB,yBAAO,CAAG,QAAVA,QAAU,CAACC,KAAD,CAAQC,MAAR,CAAmB,CAC/B,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKU,2BAAL,CACI,GAAMiB,iBAAgB,CAAG,CACrBD,QAAQ,CAAE,CACNR,EAAE,CAAEnB,MAAM,CAAC6B,EADL,CAENT,OAAO,CAAEpB,MAAM,CAAC8B,OAFV,CAGNT,KAAK,CAAE,CAHD,CAINC,QAAQ,CAAE,KAJJ,CAKNC,OAAO,CAAE,KALH,CADW,CAQrBQ,SAAS,CAAE,CARU,CASrBC,OAAO,CAAE,KATY,CAAzB,CAYA,OAAO,qFACAjC,KADP,MAEIkC,cAAc,CAAElC,KAAK,CAACkC,cAAN,CAAqBC,MAArB,CAA4B,CAACN,gBAAD,CAA5B,EAAgDO,IAAhD,CAAqDX,UAArD,CAFpB,GAIJ,IAAKZ,8BAAL,CACI,OAAO,qFACAb,KADP,MAEIkC,cAAc,CAAElC,KAAK,CAACkC,cAAN,CAAqBG,GAArB,CAAyB,SAAAC,CAAC,CAAI,CAC1C,GAAIA,CAAC,CAACV,QAAF,CAAWR,EAAX,GAAkBnB,MAAM,CAAC6B,EAA7B,CAAiC,CAC7BQ,CAAC,CAACL,OAAF,CAAY,IAAZ,CACH,CACD,MAAOK,EAAP,CACH,CALe,EAKbF,IALa,CAKRX,UALQ,CAFpB,GASJ,IAAKX,6BAAL,CACI,OAAO,qFACAd,KADP,MAEIkC,cAAc,CAAElC,KAAK,CAACkC,cAAN,CAAqBG,GAArB,CAAyB,SAAAC,CAAC,CAAI,CAC1C,GAAIA,CAAC,CAACV,QAAF,CAAWR,EAAX,GAAkBnB,MAAM,CAAC6B,EAA7B,CAAiC,CAC7BQ,CAAC,CAACV,QAAF,CAAWN,KAAX,CAAmBgB,CAAC,CAACV,QAAF,CAAWN,KAAX,CAAmB,CAAtC,CACH,CACD,MAAOgB,EAAP,CACH,CALe,EAKbF,IALa,CAKRX,UALQ,CAFpB,GASJ,IAAKV,6BAAL,CACI,OAAO,qFACAf,KADP,MAEIkC,cAAc,CAAElC,KAAK,CAACkC,cAAN,CAAqBG,GAArB,CAAyB,SAAAC,CAAC,CAAI,CAC1C,GAAIA,CAAC,CAACV,QAAF,CAAWR,EAAX,GAAkBnB,MAAM,CAAC6B,EAA7B,CAAiC,CAC7BQ,CAAC,CAACV,QAAF,CAAWN,KAAX,CAAmBgB,CAAC,CAACV,QAAF,CAAWN,KAAX,CAAmB,CAAtC,CACH,CACD,MAAOgB,EAAP,CACH,CALe,EAKbF,IALa,CAKRX,UALQ,CAFpB,GASJ,IAAKT,+BAAL,CACIf,MAAM,CAACsC,OAAP,CAAeC,OAAf,CAAuB,SAAAC,MAAM,CAAI,CAC7B,GAAMC,EAAC,CAAG1C,KAAK,CAACkC,cAAN,CAAqBvE,SAArB,CAA+B,SAAA2E,CAAC,QAAIG,OAAM,CAACb,QAAP,CAAgBR,EAAhB,GAAuBkB,CAAC,CAACV,QAAF,CAAWR,EAAtC,EAAhC,CAAV,CACA;AACA,GAAIsB,CAAC,GAAK,CAAC,CAAP,EAAYD,MAAM,CAACT,SAAP,CAAmBhC,KAAK,CAACkC,cAAN,CAAqBQ,CAArB,EAAwBV,SAA3D,CAAsE,CAClE,OACH,CACD,OAAQS,MAAM,CAACE,MAAf,EACI,IAAK,QAAL,CACI,GAAID,CAAC,GAAK,CAAC,CAAX,CAAc,CACV1C,KAAK,CAACkC,cAAN,CAAuBlC,KAAK,CAACkC,cAAN,CAAqBC,MAArB,CAA4B,CAAC,CAChDP,QAAQ,CAAET,sBAAsB,CAACsB,MAAM,CAACb,QAAR,CADgB,CAEhDI,SAAS,CAAES,MAAM,CAACT,SAF8B,CAGhDC,OAAO,CAAE,KAHuC,CAAD,CAA5B,CAAvB,CAKH,CAND,IAMO,CACHjC,KAAK,CAACkC,cAAN,CAAqBQ,CAArB,EAAwBV,SAAxB,CAAoCS,MAAM,CAACT,SAA3C,CACH,CACD,MACJ,IAAK,QAAL,CACI,GAAIU,CAAC,GAAK,CAAC,CAAX,CAAc,CACV1C,KAAK,CAACkC,cAAN,CAAuBlC,KAAK,CAACkC,cAAN,CAAqBC,MAArB,CAA4B,CAAC,CAChDP,QAAQ,CAAET,sBAAsB,CAACsB,MAAM,CAACb,QAAR,CADgB,CAEhDI,SAAS,CAAES,MAAM,CAACT,SAF8B,CAGhDC,OAAO,CAAE,KAHuC,CAAD,CAA5B,CAAvB,CAKH,CAND,IAMO,CACHjC,KAAK,CAACkC,cAAN,CAAqBQ,CAArB,EAAwBV,SAAxB,CAAoCS,MAAM,CAACT,SAA3C,CACAhC,KAAK,CAACkC,cAAN,CAAqBQ,CAArB,EAAwBd,QAAxB,CAAmCT,sBAAsB,CAACsB,MAAM,CAACb,QAAR,CAAzD,CACH,CACD,MACJ,IAAK,QAAL,CACI,GAAIc,CAAC,GAAK,CAAC,CAAX,CAAc,CACV1C,KAAK,CAACkC,cAAN,CAAuBlC,KAAK,CAACkC,cAAN,CAAqBC,MAArB,CAA4B,CAAC,CAChDP,QAAQ,CAAET,sBAAsB,CAACsB,MAAM,CAACb,QAAR,CADgB,CAEhDI,SAAS,CAAES,MAAM,CAACT,SAF8B,CAGhDC,OAAO,CAAE,IAHuC,CAAD,CAA5B,CAAvB,CAKH,CAND,IAMO,CACHjC,KAAK,CAACkC,cAAN,CAAqBQ,CAArB,EAAwBV,SAAxB,CAAoCS,MAAM,CAACT,SAA3C,CACAhC,KAAK,CAACkC,cAAN,CAAqBQ,CAArB,EAAwBT,OAAxB,CAAkC,IAAlC,CACH,CACD,MACJ,QACI,OArCR,CAuCH,CA7CD,EA+CA,OAAO,qFACAjC,KADP,MAEIkC,cAAc,CAAElC,KAAK,CAACkC,cAAN,CAAqBE,IAArB,CAA0BX,UAA1B,CAFpB,GAIJ,IAAKR,4BAAL,CACI,OAAO,qFACAjB,KADP,MAEIkC,cAAc,CAAEjC,MAAM,CAAC2C,SAAP,CAAiBP,GAAjB,CAAqB,SAAAQ,CAAC,QAAK,CACvCjB,QAAQ,CAAET,sBAAsB,CAAC0B,CAAD,CADO,CAEvCb,SAAS,CAAE,CAF4B,CAGvCC,OAAO,CAAE,KAH8B,CAAL,EAAtB,EAIZG,IAJY,CAIPX,UAJO,CAFpB,GAQJ,QACI,KAAM,IAAIlB,MAAJ,CAAU,wBAAV,CAAN,CA9GR,CAgHH,CAjHD,CAmHA,GAAMD,8BAAY,CAAG,CAAE4B,cAAc,CAAE,EAAlB,CAArB,CAEA,GAAMY,kCAAgB,CAAG,QAAnBA,iBAAmB,OAAkB,IAAfvD,SAAe,OAAfA,QAAe,CACvC,GAAMC,MAAK,CAAGZ,eAAK,CAAC8B,UAAN,CAAiBX,wBAAjB,CAA0BO,6BAA1B,CAAd,CACA,mBACI,2BAAC,yBAAD,CAAiB,QAAjB,EAA0B,KAAK,CAAEd,KAAjC,UACKD,QADL,EADJ,CAKH,CAPD,CASeuD,gGAAf,E;;ACjKA,GAAMC,sBAAqB,cAAGnE,eAAK,CAACC,aAAN,EAA9B,CAEekE,yFAAf,E;;ACDO,GAAMC,4BAA2B,CAAG,6BAApC,CAEP,GAAMjD,+BAAO,CAAG,QAAVA,QAAU,CAACC,KAAD,CAAQC,MAAR,CAAmB,CAC/B,OAAQA,MAAM,CAACC,IAAf,EACI,IAAK8C,4BAAL,CACI,OAAO,qFACAhD,KADP,MAEIiD,eAAe,CAAEhD,MAAM,CAAC2B,QAF5B,GAIJ,QACI,KAAM,IAAIrB,MAAJ,CAAU,wBAAV,CAAN,CAPR,CASH,CAVD,CAYA,GAAMD,oCAAY,CAAG,CAAE2C,eAAe,CAAE,IAAnB,CAArB,CAEA,GAAMC,8CAAsB,CAAG,QAAzBA,uBAAyB,MAAkB,IAAf3D,SAAe,MAAfA,QAAe,CAC7C,GAAMC,MAAK,CAAGZ,eAAK,CAAC8B,UAAN,CAAiBX,8BAAjB,CAA0BO,mCAA1B,CAAd,CACA,mBACI,2BAAC,+BAAD,CAAuB,QAAvB,EAAgC,KAAK,CAAEd,KAAvC,UACKD,QADL,EADJ,CAKH,CAPD,CASe2D,kHAAf,E;;;;;AC1BA,GAAMC,YAAW,cAAGvE,eAAK,CAACC,aAAN,EAApB,CAEesE,qEAAf,E;;ACDO,GAAMC,gBAAe,CAAG,iBAAxB,CACA,GAAMC,mBAAkB,CAAG,oBAA3B,CACA,GAAMnC,8BAAgB,CAAG,kBAAzB,CACA,GAAMoC,mBAAkB,CAAG,oBAA3B,CAEP,GAAMvD,qBAAO,CAAG,QAAVA,QAAU,CAACC,KAAD,CAAQC,MAAR,CAAmB,CAC/B,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKkD,gBAAL,CACI,OAAO,qFACApD,KADP,MAEIuD,aAAa,CAAC,qFACPvD,KAAK,CAACuD,aADA,kDAERtD,MAAM,CAACuD,UAFC,CAEY,IAFZ,EAFjB,GAOJ,IAAKH,mBAAL,CACI,GAAMI,iBAAgB,CAAGzD,KAAK,CAACuD,aAA/B,CACA,MAAOE,iBAAgB,CAACxD,MAAM,CAACuD,UAAR,CAAvB,CACA,OAAO,qFACAxD,KADP,MAEIuD,aAAa,CAAC,4CAAME,gBAAP,CAFjB,GAIJ,IAAKvC,8BAAL,CACI,OAAO,qFACAlB,KADP,MAEIuD,aAAa,CAAEtD,MAAM,CAACsD,aAF1B,GAIJ,IAAKD,mBAAL,CACI,OAAO,qFACAtD,KADP,MAEIuD,aAAa,CAAE,EAFnB,GAIJ,QACI,KAAM,IAAIhD,MAAJ,CAAU,wBAAV,CAAN,CA3BR,CA6BH,CA9BD,CAgCA,GAAMD,0BAAY,CAAG,CAAEiD,aAAa,CAAE,EAAjB,CAArB,CAEA,GAAMG,0BAAY,CAAG,QAAfA,aAAe,MAAkB,IAAfnE,SAAe,MAAfA,QAAe,CACnC,GAAMC,MAAK,CAAGZ,eAAK,CAAC8B,UAAN,CAAiBX,oBAAjB,CAA0BO,yBAA1B,CAAd,CACA,mBACI,2BAAC,qBAAD,CAAa,QAAb,EAAsB,KAAK,CAAEd,KAA7B,UACKD,QADL,EADJ,CAKH,CAPD,CASemE,oFAAf,E;;;;;;;;;;;;;;;;;GC1CMC,gC,kLAGF,0BAAc,2EACV,wBACA,MAAKlE,UAAL,CAAkB,EAAlB,CAFU,aAGb,C,oFAED,wBAAeA,UAAf,CAA0B,iBACtB,GAAI,KAAKA,UAAL,GAAoBA,UAAxB,CAAoC,CAChC,OACH,CACD,KAAKA,UAAL,CAAkBA,UAAlB,CACA,GAAMmE,aAAY,CAAG5F,sBAAsB,eAAtB,CAA0CyB,UAA/D,CAEA,KAAKoE,EAAL,CAAU,GAAIC,UAAJ,CAAcF,YAAd,CAAV,CAEA,KAAKC,EAAL,CAAQE,SAAR,CAAoB,SAAAC,GAAG,CAAI,CACvB,4DAAqB,MAAI,CAACC,OAA1B,IAASC,QAAT,mBACA,GAAMC,QAAO,CAAGC,IAAI,CAACC,KAAL,CAAWL,GAAG,CAACM,IAAf,CAAhB,CACA,OAAOH,OAAO,CAACjE,IAAf,EACI,IAAK,eAAL,CACIqE,OAAO,CAACC,KAAR,CAAc,YAAd,CAA4BL,OAAO,CAACvB,SAApC,EACAsB,QAAQ,CAAC,CACLhE,IAAI,CAAEe,2BADD,CAEL2B,SAAS,CAAEuB,OAAO,CAACvB,SAFd,CAAD,CAAR,CAIA,MACJ,IAAK,SAAL,CACI2B,OAAO,CAACC,KAAR,CAAc,QAAd,CAAwBL,OAAO,CAAC5B,OAAhC,EACA2B,QAAQ,CAAC,CACLhE,IAAI,CAAEc,8BADD,CAELuB,OAAO,CAAE4B,OAAO,CAAC5B,OAFZ,CAAD,CAAR,CAIA,MACJ,QACI,OAhBR,CAkBH,CArBD,CAsBH,C,sBAED,iBAAQ,iBACJ,mBACI,2BAAC,oBAAD,CAAY,QAAZ,WACK,2BAAG9C,WAAH,MAAGA,UAAH,OAAoB,OAAI,CAACgF,cAAL,CAAoBhF,UAApB,CAApB,EADL,EADJ,CAKH,C,6BA/CyBb,eAAK,CAAC8F,S,EAA9Bf,+B,CACKgB,W,CAAcC,yB,CAiDVjB,uFAAf,E;;ACvDA,QAASkB,gBAAT,EAA2B,CACvB,sBAA6BjG,eAAK,CAACkG,UAAN,CAAiBnE,yBAAjB,CAA7B,kFAASuB,cAAT,uBAASA,cAAT,CACA,uBAAqDtD,eAAK,CAACkG,UAAN,CAAiB/B,+BAAjB,CAArD,mFAA0BgC,qBAA1B,uBAAS9B,eAAT,CAEA,GAAI+B,oBAAmB,CAAG,IAA1B,CACA,GAAIjD,QAAJ,CACA,GAAIkD,MAAJ,CACA,GAAIF,qBAAqB,GAAK,IAA9B,CAAoC,CAChC,GAAMtH,MAAK,CAAGyE,cAAc,CAACvE,SAAf,CAAyB,kBAAEiE,SAAF,MAAEA,QAAF,OAAgBA,SAAQ,CAACJ,OAAzB,EAAzB,CAAd,CACA,GAAI/D,KAAK,GAAK,CAAC,CAAf,CAAkB,CACduH,mBAAmB,CAAG,KAAtB,CACH,CAFD,IAEO,CACHjD,OAAO,CAAGG,cAAc,CAACzE,KAAD,CAAd,CAAsBmE,QAAtB,CAA+BP,OAAzC,CACA4D,KAAK,CAAG/C,cAAc,CAACzE,KAAD,CAAd,CAAsBmE,QAAtB,CAA+BN,KAAvC,CACH,CACJ,CARD,IAQO,CACHS,OAAO,CAAGgD,qBAAqB,CAAC1D,OAAhC,CACA4D,KAAK,CAAGF,qBAAqB,CAACzD,KAA9B,CACH,CAED,MACI0D,oBAAmB,cACf,kCAAK,SAAS,CAAC,kBAAf,uBACI,kCAAK,SAAS,CAAC,QAAf,uBACI,mCAAK,SAAS,CAAC,cAAf,wBACI,mCAAK,SAAS,CAAC,eAAf,wBACI,kCAAK,SAAS,CAAC,iBAAf,CAAiC,KAAK,CAAC,IAAvC,CAA4C,MAAM,CAAC,IAAnD,CAAwD,OAAO,CAAC,WAAhE,CAA4E,IAAI,CAAC,MAAjF,CAAwF,KAAK,CAAC,4BAA9F,uBAA2H,mCAAM,CAAC,CAAC,wHAAR,EAA3H,EADJ,cAEI,mCAAM,SAAS,CAAC,mBAAhB,UAAqCC,KAArC,EAFJ,GADJ,cAKI,mCAAK,SAAS,CAAC,iBAAf,wBACI,kEADJ,cAEI,yCAAIlD,OAAJ,EAFJ,GALJ,GADJ,EADJ,EADe,CAef,IAhBR,CAkBH,CAEc8C,0EAAf,E;;ACtCA,QAASK,OAAT,EAAkB,CACd,sBAAwBtG,eAAK,CAACkG,UAAN,CAAiBnG,oBAAjB,CAAxB,CAAQgB,WAAR,mBAAQA,WAAR,CACA,uBAAqBf,eAAK,CAACkG,UAAN,CAAiB/B,+BAAjB,CAArB,mFAASmB,QAAT,uBAEAtF,eAAK,CAACuG,SAAN,CAAgB,UAAM,CAClB;AACA,GAAMC,QAAO,CAAGpG,MAAM,CAACoG,OAAvB,CACMC,eAAe,CAAGrG,MAAM,CAACqG,eAD/B,CAEMC,wBAAwB,CAAGtG,MAAM,CAACsG,wBAFxC,CAIA;AACA,GAAMC,UAAS,CAAGH,OAAO,CAACI,SAAR,CAAkB,cAAlB,CAAlB,CAEA;AACA,GAAI,CAACD,SAAL,CAAgB,CACdF,eAAe,CAACD,OAAD,CAAf,CACAE,wBAAwB,CAACF,OAAD,CAAxB,CACD,CAED,GAAMK,eAAc,CAAG,CACrBC,SAAS,CAAE,CAAC,WAAD,CADU,CAErBC,QAAQ,CAAE,IAFW,CAGrBC,KAAK,CAAE,IAHc,CAAvB,CAMA;AACA,GAAMC,OAAM,CAAGT,OAAO,CAAC,oBAAD,CAAuBK,cAAvB,CAAtB,CACA,GAAMK,UAAS,CAAGD,MAAM,CAACE,YAAP,EAAlB,CACA,GAAMC,gBAAe,CAAGH,MAAM,CAACI,YAAP,GAAsBD,eAA9C,CAEAF,SAAS,CAACI,gBAAV,CAA2BF,eAAe,CAACG,iBAA3C,CAA8D,SAACC,GAAD,CAAS,CACnE,GAAMC,aAAY,CAAGD,GAAG,CAACE,IAAzB,CACA/B,OAAO,CAACgC,GAAR,CAAY,kBAAZ,CAAgCF,YAAhC,EACAnC,QAAQ,CAAC,CACLhE,IAAI,CAAE8C,2BADD,CAELpB,QAAQ,CAAEwC,IAAI,CAACC,KAAL,CAAWgC,YAAX,CAFL,CAAD,CAAR,CAIH,CAPD,EASAR,MAAM,CAACW,KAAP,CAAa,UAAM,CACjBX,MAAM,CAACY,sBAAP,GACAZ,MAAM,CAACa,GAAP,CAAW/G,WAAX,EACAkG,MAAM,CAACc,IAAP,GACD,CAJD,EAMA,MAAO,WAAM,CACTd,MAAM,CAACe,OAAP,GACH,CAFD,CAGA;AACH,CA7CD,CA6CG,EA7CH,EA+CA,mBACI,mCAAK,SAAS,CAAC,gBAAf,wBACI,2BAAC,sBAAD,IADJ,cAEI,kCAAK,sBAAL,uBACI,oCAAO,EAAE,CAAC,oBAAV,CAA+B,SAAS,CAAC,oBAAzC,CAA8D,WAAW,KAAzE,EADJ,EAFJ,GADJ,CAQD,CAEY1B,wDAAf,E;;;;;;;;;ACpDA,GAAM2B,cAAa,CAAG,UAAtB,CACA,GAAMC,iBAAgB,CAAG,aAAzB,CACA,GAAMC,UAAS,CAAG,MAAlB,CAEA,GAAMC,qBAAoB,CAAGjJ,iBAAiB,CAAG,aAAjD,CACA,GAAMkJ,kBAAiB,CAAGlJ,iBAAiB,CAAG,UAA9C,CAEA,QAASmJ,WAAT,MAIG,IAHCjC,MAGD,MAHCA,KAGD,CAFCzB,UAED,MAFCA,UAED,CADC2D,QACD,MADCA,QACD,CACC,sBAA4BvI,eAAK,CAACkG,UAAN,CAAiBnE,yBAAjB,CAA5B,kFAAQyG,gBAAR,uBACA,uBAA0CxI,eAAK,CAACkG,UAAN,CAAiB3B,qBAAjB,CAA1C,mFAASI,aAAT,uBAASA,aAAT,CAA0B8D,YAA1B,uBACA,uBAAuBzI,eAAK,CAACkG,UAAN,CAAiBnG,oBAAjB,CAAvB,CAAQc,UAAR,oBAAQA,UAAR,CACA,uBAA6Bb,eAAK,CAACkG,UAAN,CAAiBlF,qBAAjB,CAA7B,mFAASS,cAAT,uBAASA,cAAT,CACA,oBAAwCzB,eAAK,CAAC0I,QAAN,CAAeP,SAAf,CAAxC,8EAAOQ,YAAP,qBAAqBC,eAArB,qBAEA5I,eAAK,CAACuG,SAAN,CAAgB,UAAM,CAClB,GAAIoC,YAAY,GAAKR,SAArB,CAAgC,CAC5B,GAAMU,SAAQ,uHAAG,sKAETL,gBAAgB,CAAC,CACblH,IAAI,CAAEqH,YAAY,GAAKT,gBAAjB,CAAqC/F,4BAArC,CAAoED,4BAD7D,CAEbgB,EAAE,CAAE0B,UAFS,CAAD,CAAhB,CAIA6D,YAAY,CAAC,CACTnH,IAAI,CAAEqH,YAAY,GAAKT,gBAAjB,CAAqCzD,kBAArC,CAA0DD,eADvD,CAETI,UAAU,CAAVA,UAFS,CAAD,CAAZ,CAKMkE,GAXG,CAWGH,YAAY,GAAKT,gBAAjB,CAAoCE,oBAApC,CAA2DC,iBAX9D,uBAYcU,MAAK,CAACD,GAAD,CAAK,CAC7BE,MAAM,CAAE,MADqB,CAE7BC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,gBAAiBxH,cAFZ,CAFoB,CAM7ByH,IAAI,CAAE1D,IAAI,CAAC2D,SAAL,CAAe,CACjBtI,UAAU,CAAVA,UADiB,CAEjB+D,UAAU,CAAVA,UAFiB,CAAf,CANuB,CAAL,CAZnB,QAYHwE,QAZG,oBAwBLA,QAAQ,CAACC,MAAT,GAAoB,GAxBf,+BAyBC,IAAI1H,MAAJ,EAzBD,yFA4BTgE,OAAO,CAACgC,GAAR,CAAY,2BAAZ,cACAa,gBAAgB,CAAC,CACblH,IAAI,CAAEqH,YAAY,GAAKT,gBAAjB,CAAqChG,4BAArC,CAAoEC,4BAD7D,CAEbe,EAAE,CAAE0B,UAFS,CAAD,CAAhB,CAIA6D,YAAY,CAAC,CACTnH,IAAI,CAAEqH,YAAY,GAAKT,gBAAjB,CAAqC1D,eAArC,CAAuDC,kBADpD,CAETG,UAAU,CAAVA,UAFS,CAAD,CAAZ,CAjCS,qEAAH,kBAARiE,SAAQ,2CAAd,CAwCAA,QAAQ,GACX,CACD;AACH,CA7CD,CA6CG,CAACF,YAAD,CA7CH,EA+CA,GAAMW,WAAU,CAAG,CAAC,CAAC3E,aAAa,CAACC,UAAD,CAAlC,CAEA,GAAI2E,UAAS,CAAG,EAAhB,CACA,GAAID,UAAJ,CAAgB,CACZC,SAAS,CAAG,kCAAZ,CACH,CAFD,IAEO,IAAIhB,QAAJ,CAAc,CACjBgB,SAAS,CAAG,wBAAZ,CACH,CAFM,IAEA,CACHA,SAAS,CAAG,qCAAZ,CACH,CAED,mBACI,sCACI,SAAS,CAAEA,SADf,CAEI,OAAO,CAAE,yBAAMX,gBAAe,CAACU,UAAU,CAAGpB,gBAAH,CAAsBD,aAAjC,CAArB,EAFb,CAGI,QAAQ,CAAEM,QAHd,wBAKI,kCAAK,SAAS,CAAC,iBAAf,CAAiC,KAAK,CAAC,IAAvC,CAA4C,MAAM,CAAC,IAAnD,CAAwD,OAAO,CAAC,WAAhE,CAA4E,IAAI,CAAC,MAAjF,CAAwF,KAAK,CAAC,4BAA9F,uBAA2H,mCAAM,CAAC,CAAC,wHAAR,EAA3H,EALJ,cAMI,mCAAM,SAAS,CAAC,mBAAhB,UAAqClC,KAArC,EANJ,GADJ,CAUH,CAEciC,kEAAf,E;;ACrGA,QAASkB,gBAAT,CAAyBC,GAAzB,CAA8BC,OAA9B,CAAuC,CACnC1J,eAAK,CAACuG,SAAN,CAAgB,UAAM,CAClB,QAASoD,mBAAT,CAA4BC,KAA5B,CAAmC,CAC/B,GAAIH,GAAG,CAACI,OAAJ,EAAe,CAACJ,GAAG,CAACI,OAAJ,CAAYC,QAAZ,CAAqBF,KAAK,CAACG,MAA3B,CAApB,CAAwD,CACpDL,OAAO,GACV,CACJ,CAEDM,QAAQ,CAAC1C,gBAAT,CAA0B,WAA1B,CAAuCqC,kBAAvC,EACA,MAAO,WAAM,CACTK,QAAQ,CAACC,mBAAT,CAA6B,WAA7B,CAA0CN,kBAA1C,EACH,CAFD,CAGH,CAXD,CAWG,CAACF,GAAD,CAAMC,OAAN,CAXH,EAYH,CAEcF,wEAAf,E;;ACPA,GAAMU,yBAAwB,CAAG/K,iBAAiB,CAAG,iBAArD,CAEA,QAASgL,oBAAT,MAGG,IAFCvF,WAED,MAFCA,UAED,CADCwF,WACD,MADCA,WACD,CACC,sBAAoBpK,eAAK,CAACkG,UAAN,CAAiBnE,yBAAjB,CAApB,kFAAQuD,QAAR,uBACA,uBAAuBtF,eAAK,CAACkG,UAAN,CAAiBnG,oBAAjB,CAAvB,CAAQc,UAAR,oBAAQA,UAAR,CACA,uBAA6Bb,eAAK,CAACkG,UAAN,CAAiBlF,qBAAjB,CAA7B,mFAASS,cAAT,uBAASA,cAAT,CACA,oBAAkCzB,eAAK,CAAC0I,QAAN,CAAe,KAAf,CAAlC,8EAAO2B,SAAP,qBAAkBC,YAAlB,qBACA,GAAMC,SAAQ,CAAGvK,eAAK,CAACwK,MAAN,CAAa,IAAb,CAAjB,CACAhB,oBAAe,CAACe,QAAD,CAAWH,WAAX,CAAf,CAEApK,eAAK,CAACuG,SAAN,CAAgB,UAAM,CAClB,GAAI8D,SAAJ,CAAe,CACX,GAAMI,mBAAkB,uHAAG,gMAEY1B,MAAK,CAACmB,wBAAD,CAA2B,CAC3DlB,MAAM,CAAE,MADmD,CAE3DC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,gBAAiBxH,cAFZ,CAFkD,CAM3DyH,IAAI,CAAE1D,IAAI,CAAC2D,SAAL,CAAe,CACjBtI,UAAU,CAAVA,UADiB,CAEjBqC,EAAE,CAAE0B,UAFa,CAAf,CANqD,CAA3B,CAFjB,QAEb8F,gBAFa,oBAafA,gBAAgB,CAACrB,MAAjB,GAA4B,GAbb,0BAcf/D,QAAQ,CAAC,CACLhE,IAAI,CAAEW,6BADD,CAELiB,EAAE,CAAE0B,UAFC,CAAD,CAAR,CAde,kCAmBT,IAAIjD,MAAJ,EAnBS,yFAsBnBgE,OAAO,CAACgC,GAAR,CAAY,8BAAZ,cAtBmB,QAwBvByC,WAAW,GAxBY,qEAAH,kBAAlBK,mBAAkB,2CAAxB,CA2BAA,kBAAkB,GACrB,CACD;AACH,CAhCD,CAgCG,CAACJ,SAAD,CAhCH,EAkCA,mBACI,mCAAK,SAAS,CAAC,OAAf,wBACI,mCAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAEE,QAAhC,wBACI,iCAAI,SAAS,CAAC,QAAd,4DADJ,cAEI,mCAAK,SAAS,CAAC,+BAAf,wBACI,qCACI,IAAI,CAAE,QADV,CAEI,SAAS,CAAC,2BAFd,CAGI,OAAO,CAAEH,WAHb,oBADJ,cAQI,qCACI,IAAI,CAAE,QADV,CAEI,SAAS,CAAC,0BAFd,CAGI,OAAO,CAAE,yBAAME,aAAY,CAAC,IAAD,CAAlB,EAHb,oBARJ,GAFJ,GADJ,cAoBI,kCAAK,SAAS,CAAC,gBAAf,EApBJ,GADJ,CAwBH,CAEcH,oFAAf,E;;AChFA,QAASQ,qBAAT,MAA8C,IAAd/F,WAAc,MAAdA,UAAc,CAC1C,oBAA2C5E,eAAK,CAAC0I,QAAN,CAAe,KAAf,CAA3C,8EAAOkC,YAAP,qBAAqBC,kBAArB,qBACA,GAAMC,UAAS,CAAG,QAAZA,UAAY,SAAMD,mBAAkB,CAAC,IAAD,CAAxB,EAAlB,CACA,GAAME,UAAS,CAAG,QAAZA,UAAY,SAAMF,mBAAkB,CAAC,KAAD,CAAxB,EAAlB,CACA,GAAMG,MAAK,CAAGJ,YAAY,cACtB,2BAAC,4BAAD,EACI,UAAU,CAAEhG,UADhB,CAEI,WAAW,CAAEmG,SAFjB,EADsB,CAKtB,IALJ,CAOA,mBACI,4BAAC,eAAD,CAAO,QAAP,YACKC,KADL,cAEI,qCACI,OAAO,CAAEF,SADb,CAEI,SAAS,CAAC,6BAFd,CAGI,KAAK,CAAC,QAHV,uBAKI,kCAAK,SAAS,CAAC,8BAAf,CAA8C,KAAK,CAAC,IAApD,CAAyD,MAAM,CAAC,IAAhE,CAAqE,OAAO,CAAC,WAA7E,CAAyF,IAAI,CAAC,MAA9F,CAAqG,KAAK,CAAC,4BAA3G,uBAAwI,mCAAM,CAAC,CAAC,gGAAR,EAAxI,EALJ,EAFJ,GADJ,CAYH,CAEcH,sFAAf,E;;ACtBA,GAAMM,0BAAyB,CAAG9L,iBAAiB,CAAG,qBAAtD,CAEA,QAAS+L,qBAAT,MAGG,IAFCtG,WAED,MAFCA,UAED,CADCwF,WACD,MADCA,WACD,CACC,sBAAuBpK,eAAK,CAACkG,UAAN,CAAiBnG,oBAAjB,CAAvB,CAAQc,UAAR,mBAAQA,UAAR,CACA,uBAA6Bb,eAAK,CAACkG,UAAN,CAAiBlF,qBAAjB,CAA7B,mFAASS,cAAT,uBAASA,cAAT,CACA,oBAAkCzB,eAAK,CAAC0I,QAAN,CAAe,KAAf,CAAlC,8EAAO2B,SAAP,qBAAkBC,YAAlB,qBACA,GAAMC,SAAQ,CAAGvK,eAAK,CAACwK,MAAN,CAAa,IAAb,CAAjB,CACAhB,oBAAe,CAACe,QAAD,CAAWH,WAAX,CAAf,CAEApK,eAAK,CAACuG,SAAN,CAAgB,UAAM,CAClB,GAAI8D,SAAJ,CAAe,CACX,GAAMc,oBAAmB,uHAAG,gMAEWpC,MAAK,CAACkC,yBAAD,CAA4B,CAC5DjC,MAAM,CAAE,MADoD,CAE5DC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,gBAAiBxH,cAFZ,CAFmD,CAM5DyH,IAAI,CAAE1D,IAAI,CAAC2D,SAAL,CAAe,CACjBtI,UAAU,CAAVA,UADiB,CAEjBqC,EAAE,CAAE0B,UAFa,CAAf,CANsD,CAA5B,CAFhB,QAEd8F,gBAFc,oBAahBA,gBAAgB,CAACrB,MAAjB,GAA4B,GAbZ,+BAcV,IAAI1H,MAAJ,EAdU,uFAiBpBgE,OAAO,CAACgC,GAAR,CAAY,qCAAZ,cAjBoB,QAmBxByC,WAAW,GAnBa,oEAAH,kBAAnBe,oBAAmB,2CAAzB,CAsBAA,mBAAmB,GACtB,CACD;AACH,CA3BD,CA2BG,CAACd,SAAD,CA3BH,EA6BA,mBACI,mCAAK,SAAS,CAAC,OAAf,wBACI,mCAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAEE,QAAhC,wBACI,iCAAI,SAAS,CAAC,QAAd,4CADJ,cAEI,mCAAK,SAAS,CAAC,+BAAf,wBACI,qCACI,IAAI,CAAE,QADV,CAEI,SAAS,CAAC,2BAFd,CAGI,OAAO,CAAEH,WAHb,oBADJ,cAQI,qCACI,IAAI,CAAE,QADV,CAEI,SAAS,CAAC,yBAFd,CAGI,OAAO,CAAE,yBAAME,aAAY,CAAC,IAAD,CAAlB,EAHb,6BARJ,GAFJ,GADJ,cAoBI,kCAAK,SAAS,CAAC,gBAAf,EApBJ,GADJ,CAwBH,CAEcY,sFAAf,E;;ACtEA,QAASE,sBAAT,MAA+C,IAAdxG,WAAc,MAAdA,UAAc,CAC3C,oBAA2C5E,eAAK,CAAC0I,QAAN,CAAe,KAAf,CAA3C,8EAAOkC,YAAP,qBAAqBC,kBAArB,qBACA,GAAMC,UAAS,CAAG,QAAZA,UAAY,SAAMD,mBAAkB,CAAC,IAAD,CAAxB,EAAlB,CACA,GAAME,UAAS,CAAG,QAAZA,UAAY,SAAMF,mBAAkB,CAAC,KAAD,CAAxB,EAAlB,CACA,GAAMG,MAAK,CAAGJ,YAAY,cACtB,2BAAC,6BAAD,EACI,UAAU,CAAEhG,UADhB,CAEI,WAAW,CAAEmG,SAFjB,EADsB,CAKtB,IALJ,CAOA,mBACI,4BAAC,eAAD,CAAO,QAAP,YACKC,KADL,cAEI,qCACI,OAAO,CAAEF,SADb,CAEI,SAAS,CAAC,4BAFd,CAGI,KAAK,CAAC,iBAHV,uBAKI,kCAAK,SAAS,CAAC,eAAf,CAA+B,KAAK,CAAC,IAArC,CAA0C,MAAM,CAAC,IAAjD,CAAsD,OAAO,CAAC,WAA9D,CAA0E,IAAI,CAAC,MAA/E,CAAsF,KAAK,CAAC,4BAA5F,uBAAyH,mCAAM,CAAC,CAAC,kKAAR,EAAzH,EALJ,EAFJ,GADJ,CAYH,CAEcM,wFAAf,E;;ACtBA,QAASC,SAAT,MAIG,IAHClI,QAGD,MAHCA,OAGD,CAFCD,EAED,MAFCA,EAED,CADCmD,KACD,MADCA,KACD,CACC,sBAAsCrG,eAAK,CAACkG,UAAN,CAAiBlF,qBAAjB,CAAtC,4HAASO,UAAT,qBAASA,UAAT,CAAqBC,WAArB,qBAAqBA,WAArB,CACA,mBACI,mCAAK,SAAS,CAAC,QAAf,wBACI,mCAAK,SAAS,CAAC,cAAf,wBACI,2BAAC,mBAAD,EACI,KAAK,CAAE6E,KADX,CAEI,UAAU,CAAEnD,EAFhB,CAGI,QAAQ,CAAE,CAAC3B,UAHf,EADJ,cAMI,gCAAG,SAAS,CAAC,iBAAb,UAAgC4B,OAAhC,EANJ,GADJ,CAUY3B,WAAW,eACX,mCAAK,SAAS,CAAC,oBAAf,wBACI,2BAAC,8BAAD,EAAuB,UAAU,CAAE0B,EAAnC,EADJ,cAEI,2BAAC,6BAAD,EAAc,UAAU,CAAEA,EAA1B,EAFJ,GAXZ,GADJ,CAmBH,CAEcmI,8DAAf,E;;AC5BA,QAASC,mBAAT,CAA4BC,aAA5B,CAA2CpF,qBAA3C,CAAkE,CAC9D,GAAIoF,aAAa,CAAClI,OAAd,EAAyBkI,aAAa,CAACvI,QAAd,CAAuBL,QAApD,CAA8D,CAC1D,MAAO,MAAP,CACH,CACD,GAAI4I,aAAa,CAACvI,QAAd,CAAuBJ,OAA3B,CAAoC,CAChC,GAAIuD,qBAAqB,GAAK,IAA1B,EAAmCA,qBAAqB,CAAC3D,EAAtB,GAA6B+I,aAAa,CAACvI,QAAd,CAAuBR,EAA3F,CAAgG,CAC5F,MAAO,MAAP,CACH,CACJ,CAED,MAAO,KAAP,CACH,CAED,QAASgJ,aAAT,EAAwB,CACpB,sBAA6BxL,eAAK,CAACkG,UAAN,CAAiBnE,yBAAjB,CAA7B,kFAASuB,cAAT,uBAASA,cAAT,CACA,uBAAqDtD,eAAK,CAACkG,UAAN,CAAiB/B,+BAAjB,CAArD,mFAA0BgC,qBAA1B,uBAAS9B,eAAT,CACA,GAAIoH,mBAAkB,CAAG,EAAzB,CACAnI,cAAc,CAACM,OAAf,CAAuB,SAAAF,CAAC,CAAI,CACxB,GAAI4H,kBAAkB,CAAC5H,CAAD,CAAIyC,qBAAJ,CAAtB,CAAkD,CAC9CsF,kBAAkB,CAACC,IAAnB,cACI,2BAAC,iBAAD,EAEI,OAAO,CAAEhI,CAAC,CAACV,QAAF,CAAWP,OAFxB,CAGI,KAAK,CAAEiB,CAAC,CAACV,QAAF,CAAWN,KAHtB,CAII,EAAE,CAAEgB,CAAC,CAACV,QAAF,CAAWR,EAJnB,YACYkB,CAAC,CAACV,QAAF,CAAWR,EADvB,EADJ,EAQH,CACJ,CAXD,EAYA,mBAAO,kCAAK,SAAS,CAAC,WAAf,UAA4BiJ,kBAA5B,EAAP,CACH,CAEcD,0EAAf,E;;ACxBA,GAAMG,sBAAqB,CAAGxM,iBAAiB,CAAG,cAAlD,CACA,GAAMkJ,mCAAiB,CAAGlJ,iBAAiB,CAAG,UAA9C,CAEA,QAASyM,iBAAT,MAEG,IADCxB,YACD,MADCA,WACD,CACC,sBAA4BpK,eAAK,CAACkG,UAAN,CAAiBnE,yBAAjB,CAA5B,kFAAQyG,gBAAR,uBACA,uBAAwBxI,eAAK,CAACkG,UAAN,CAAiB3B,qBAAjB,CAAxB,mFAAQkE,YAAR,uBACA,uBAAuBzI,eAAK,CAACkG,UAAN,CAAiBnG,oBAAjB,CAAvB,CAAQc,UAAR,oBAAQA,UAAR,CACA,uBAA6Bb,eAAK,CAACkG,UAAN,CAAiBlF,qBAAjB,CAA7B,mFAASS,cAAT,uBAASA,cAAT,CACA,oBAAkCzB,eAAK,CAAC0I,QAAN,CAAe,KAAf,CAAlC,8EAAO2B,SAAP,qBAAkBC,YAAlB,qBACA,qBAAkCtK,eAAK,CAAC0I,QAAN,CAAe,EAAf,CAAlC,+EAAOmD,SAAP,qBAAkBC,YAAlB,qBACA,GAAMvB,SAAQ,CAAGvK,eAAK,CAACwK,MAAN,CAAa,IAAb,CAAjB,CACAhB,oBAAe,CAACe,QAAD,CAAWH,WAAX,CAAf,CAEApK,eAAK,CAACuG,SAAN,CAAgB,UAAM,CAClB,GAAI8D,SAAJ,CAAe,CACX,GAAM0B,gBAAe,uHAAG,sOAEehD,MAAK,CAAC4C,qBAAD,CAAwB,CACxD3C,MAAM,CAAE,MADgD,CAExDC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,gBAAiBxH,cAFZ,CAF+C,CAMxDyH,IAAI,CAAE1D,IAAI,CAAC2D,SAAL,CAAe,CACjBtI,UAAU,CAAVA,UADiB,CAEjBmC,QAAQ,CAAE6I,SAFO,CAAf,CANkD,CAAxB,CAFpB,QAEVnB,gBAFU,oBAaZA,gBAAgB,CAACrB,MAAjB,GAA4B,GAbhB,iDAcSqB,iBAAgB,CAACsB,IAAjB,EAdT,4CAcJ9I,EAdI,uBAcJA,EAdI,CAeZsF,gBAAgB,CAAC,CACblH,IAAI,CAAEU,0BADO,CAEbkB,EAAE,CAAFA,EAFa,CAGbC,OAAO,CAAE0I,SAHI,CAAD,CAAhB,CAfY,uBAqBe9C,MAAK,CAACV,kCAAD,CAAoB,CAChDW,MAAM,CAAE,MADwC,CAEhDC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,gBAAiBxH,cAFZ,CAFuC,CAMhDyH,IAAI,CAAE1D,IAAI,CAAC2D,SAAL,CAAe,CACjBtI,UAAU,CAAVA,UADiB,CAEjB+D,UAAU,CAAE1B,EAFK,CAAf,CAN0C,CAApB,CArBpB,SAqBN+I,YArBM,eAiCZ,GAAIA,YAAY,CAAC5C,MAAb,GAAwB,GAA5B,CAAiC,CAC7Bb,gBAAgB,CAAC,CACblH,IAAI,CAAEY,4BADO,CAEbgB,EAAE,CAAFA,EAFa,CAAD,CAAhB,CAIAuF,YAAY,CAAC,CACTnH,IAAI,CAAEkD,eADG,CAETI,UAAU,CAAE1B,EAFH,CAAD,CAAZ,CAIH,CA1CW,oCA4CN,IAAIvB,MAAJ,EA5CM,0FA+ChBgE,OAAO,CAACgC,GAAR,CAAY,2CAAZ,cA/CgB,QAiDpByC,WAAW,GAjDS,qEAAH,kBAAf2B,gBAAe,2CAArB,CAoDAA,eAAe,GAClB,CACD;AACH,CAzDD,CAyDG,CAAC1B,SAAD,CAzDH,EA2DA,mBACI,mCAAK,SAAS,CAAC,OAAf,wBACI,mCAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAEE,QAAhC,wBACI,iCAAI,SAAS,CAAC,QAAd,+BADJ,cAEI,yDACA,+DACI,uCACI,IAAI,CAAE,GADV,CAEI,WAAW,CAAE,cAFjB,CAGI,QAAQ,CAAE,kBAAA2B,CAAC,QAAIJ,aAAY,CAACI,CAAC,CAACnC,MAAF,CAASnJ,KAAV,CAAhB,EAHf,CAII,QAAQ,CAAEyJ,SAJd,CAKI,KAAK,CAAEwB,SALX,EADJ,cAQI,sDAAG,uEAAH,EARJ,cASI,qCACI,IAAI,CAAE,QADV,CAEI,SAAS,CAAC,yBAFd,CAGI,OAAO,CAAE,iBAAAK,CAAC,CAAI,CACVA,CAAC,CAACC,cAAF,GACA7B,YAAY,CAAC,IAAD,CAAZ,CACH,CANL,oBATJ,GADA,EAFJ,GADJ,cA0BI,kCAAK,SAAS,CAAC,gBAAf,EA1BJ,GADJ,CA8BH,CAEcsB,iFAAf,E;;ACnHA,QAASQ,kBAAT,EAA6B,CACzB,oBAA2CpM,eAAK,CAAC0I,QAAN,CAAe,KAAf,CAA3C,8EAAOkC,YAAP,qBAAqBC,kBAArB,qBACA,sBAAyB7K,eAAK,CAACkG,UAAN,CAAiBlF,qBAAjB,CAAzB,kFAASO,UAAT,uBAASA,UAAT,CACA,GAAMuJ,UAAS,CAAG,QAAZA,UAAY,SAAMD,mBAAkB,CAAC,IAAD,CAAxB,EAAlB,CACA,GAAME,UAAS,CAAG,QAAZA,UAAY,SAAMF,mBAAkB,CAAC,KAAD,CAAxB,EAAlB,CAEA,mBACI,4BAAC,eAAD,CAAO,QAAP,YACKD,YAAY,cACT,2BAAC,4BAAD,EACI,WAAW,CAAEG,SADjB,EADS,CAIT,IALR,CAMKxJ,UAAU,cACP,qCACI,OAAO,CAAEuJ,SADb,CAEI,SAAS,CAAC,8BAFd,uBAII,mCAAK,KAAK,CAAC,4BAAX,CAAwC,OAAO,CAAC,WAAhD,wBACI,mCAAM,CAAC,CAAC,eAAR,CAAwB,IAAI,CAAC,MAA7B,EADJ,cAEI,mCAAM,CAAC,CAAC,qCAAR,EAFJ,GAJJ,EADO,CAUR,IAhBP,GADJ,CAoBH,CAEcsB,mFAAf,E;;;;;AC3BA,QAASC,YAAT,MAEG,IADCjC,YACD,MADCA,WACD,CACC,GAAMG,SAAQ,CAAGvK,eAAK,CAACwK,MAAN,CAAa,IAAb,CAAjB,CACAhB,oBAAe,CAACe,QAAD,CAAWH,WAAX,CAAf,CAEA,GAAMkC,sBAAqB,CAAG,QAAxBA,sBAAwB,CAAClL,KAAD,CAAW,CACrC,GAAIA,KAAK,GAAK,UAAd,CAA0B,CACtBgJ,WAAW,GACd,CACJ,CAJD,CAMA,GAAMmC,QAAO,CAAG,CACZC,oBAAoB,CAAE,CAClBC,QAAQ,CAAE,QADQ,CAElBC,UAAU,CAAE,MAFM,CADV,CAKZC,WAAW,CAAE,CACT,QAAS,MADA,CAET,SAAU,QAFD,CAGT,UAAW,MAHF,CAITC,aAAa,CAAE,QAJN,CAKTC,QAAQ,CAAE,GALD,CALD,CAYZC,SAAS,CAAE,CACP,SAAU,UADH,CAZC,CAeZC,KAAK,CAAE,CACH,QAAS,MADN,CAfK,CAkBZC,CAAC,CAAE,CACCN,UAAU,CAAE,MADb,CAEC,SAAU,SAFX,CAGCO,WAAW,CAAE,QAHd,CAlBS,CAuBZC,aAAa,CAAE,CACX,QAAS,MADE,CAvBH,CA0BZC,2BAA2B,CAAE,CACzB,UAAW,MADc,CA1BjB,CA6BZC,MAAM,CAAE,CACJ,UAAW,MADP,CAEJ,QAAS,MAFL,CAGJC,UAAU,CAAE,QAHR,CAIJC,YAAY,CAAE,QAJV,CAKJC,cAAc,CAAE,QALZ,CAMJb,UAAU,CAAE,MANR,CAOJ,QAAS,4BAPL,CAQJ,aAAc,wCARV,CA7BI,CAuCZc,WAAW,CAAE,CACT,UAAW,MADF,CAETC,mBAAmB,CAAE,UAFZ,CAGT,UAAW,MAHF,CAvCD,CA4CZC,6BAA6B,CAAE,CAC3B,UAAW,MADgB,CAE3B,SAAU,YAFiB,CA5CnB,CAAhB,CAkDA,mBACI,mCAAK,SAAS,CAAC,OAAf,wBACI,kCAAK,SAAS,CAAC,2BAAf,CAA2C,GAAG,CAAEnD,QAAhD,uBACI,4BAAC,kDAAD,EAAe,KAAK,CAAEgC,OAAtB,CAA+B,WAAW,CAAE,IAA5C,CAAkD,aAAa,CAAED,qBAAjE,wBACI,2BAAC,2CAAD,IADJ,cAEI,2BAAC,2CAAD,IAFJ,cAGI,2BAAC,kDAAD,IAHJ,cAII,2BAAC,8CAAD,IAJJ,GADJ,EADJ,cASI,kCAAK,SAAS,CAAC,gBAAf,EATJ,GADJ,CAaH,CAEcD,gEAAf,E;;;;;;;;AClEA,GAAMsB,mBAAkB,CAAGxO,iBAAiB,CAAG,WAA/C,C,QAEeyO,sB,mNAAf,kBAAqCC,YAArC,CAAmDpF,YAAnD,CAAiEqF,iBAAjE,CAAoFjN,UAApF,8JACIgN,YAAY,CAAC,CACTvM,IAAI,CAAEL,yBADG,CAETO,WAAW,CAAEuM,6BAA6B,CAACD,iBAAD,CAFjC,CAGTrM,cAAc,CAAEqM,iBAAiB,CAAClM,WAAlB,CAA8BoM,QAHrC,CAAD,CAAZ,CADJ,uBAOgCjF,MAAK,CAAC4E,kBAAD,CAAqB,CAClD3E,MAAM,CAAE,MAD0C,CAElDC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,gBAAiB6E,iBAAiB,CAAClM,WAAlB,CAA8BoM,QAF1C,CAFyC,CAMlD9E,IAAI,CAAE1D,IAAI,CAAC2D,SAAL,CAAe,CAAEtI,UAAU,CAAVA,UAAF,CAAf,CAN4C,CAArB,CAPrC,QAOUoN,aAPV,qBAgBQA,aAAa,CAAC5E,MAAd,GAAyB,GAhBjC,mDAiB4B4E,cAAa,CAACjC,IAAd,EAjB5B,QAiBc3F,KAjBd,gBAkBc1B,aAlBd,CAkB8B0B,KAAK,CAAC6H,MAAN,CAAa,SAACzK,GAAD,CAAM0K,CAAN,CAAY,CAC3C1K,GAAG,CAAC0K,CAAC,CAACC,UAAH,CAAH,CAAoB,IAApB,CACA,MAAO3K,IAAP,CACH,CAHqB,CAGnB,EAHmB,CAlB9B,CAsBQgF,YAAY,CAAC,CACTnH,IAAI,CAAEgB,6BADG,CAETqC,aAAa,CAAbA,aAFS,CAAD,CAAZ,CAtBR,yD,wDA6BA,QAASoJ,8BAAT,CAAuCM,OAAvC,CAAgD,CAC5C,GAAMC,WAAU,CAAGD,OAAO,CAACE,OAAR,CAAgBC,OAAhB,CAAwB,gBAAxB,CAAnB,CACA,GAAIF,UAAU,GAAKG,SAAf,EAA4BH,UAAU,CAACI,OAAX,CAAmB,WAAnB,IAAoC,CAAC,CAArE,CAAwE,CACpE,MAAO,KAAP,CACH,CAFD,IAEO,CACH,MAAO,MAAP,CACH,CACJ,CAED,QAASC,aAAT,EAAwB,CACpB,oBAA2C3O,eAAK,CAAC0I,QAAN,CAAe,KAAf,CAA3C,8EAAOkC,YAAP,qBAAqBC,kBAArB,qBACA,sBAAuC7K,eAAK,CAACkG,UAAN,CAAiBlF,qBAAjB,CAAvC,kFAASO,UAAT,uBAASA,UAAT,CAAuBsM,YAAvB,uBACA,uBAAuB7N,eAAK,CAACkG,UAAN,CAAiBnG,oBAAjB,CAAvB,CAAQc,UAAR,oBAAQA,UAAR,CACA,uBAAyBb,eAAK,CAACkG,UAAN,CAAiB3B,qBAAjB,CAAzB,mFAASkE,YAAT,uBACA,GAAMqC,UAAS,CAAG,QAAZA,UAAY,SAAMD,mBAAkB,CAAC,IAAD,CAAxB,EAAlB,CACA,GAAME,UAAS,CAAG,QAAZA,UAAY,SAAMF,mBAAkB,CAAC,KAAD,CAAxB,EAAlB,CACA,GAAM+D,YAAW,CAAG,QAAdA,YAAc,EAAM,CACtB,GAAIrN,UAAJ,CAAgB,CACZ7B,oBAAI,CAACmP,OAAL,GACH,CAFD,IAEO,CACH/D,SAAS,GACZ,CACJ,CAND,CAQA9K,eAAK,CAACuG,SAAN,CAAgB,UAAM,SACHuI,iBADG,sLAClB,8IACIC,kBAAG,CAACC,MAAJ,CAAW,MAAX,CAAmB,cAAiB,IAAdR,QAAc,MAAdA,OAAc,CAChC,OAAQA,OAAO,CAAC5E,KAAhB,EACI,IAAK,QAAL,CACIgE,qBAAqB,CAACC,YAAD,CAAepF,YAAf,CAA6B+F,OAAO,CAAC9I,IAAR,CAAaoI,iBAA1C,CAA6DjN,UAA7D,CAArB,CACJ,MACA,QAAS;AACLgN,YAAY,CAAC,CAAEvM,IAAI,CAAEJ,0BAAR,CAAD,CAAZ,CACAuH,YAAY,CAAC,CAAEnH,IAAI,CAAEoD,kBAAR,CAAD,CAAZ,CACJ,MAPJ,CASH,CAVD,EADJ,sCAa2BhF,qBAAI,CAACuP,wBAAL,EAb3B,QAacC,IAbd,eAcQtB,qBAAqB,CAACC,YAAD,CAAepF,YAAf,CAA6ByG,IAAI,CAACpB,iBAAlC,CAAqDjN,UAArD,CAArB,CAdR,+EAgBQgN,YAAY,CAAC,CAAEvM,IAAI,CAAEJ,0BAAR,CAAD,CAAZ,CACAuH,YAAY,CAAC,CAAEnH,IAAI,CAAEoD,kBAAR,CAAD,CAAZ,CAjBR,oEADkB,mDAqBlBoK,gBAAgB,GAChB;AACH,CAvBD,CAuBG,EAvBH,EAyBA,mBACI,4BAAC,eAAD,CAAO,QAAP,YACMlE,YAAY,eAAI,2BAAC,gBAAD,EAAa,WAAW,CAAEG,SAA1B,EADtB,cAEI,qCACI,SAAS,CAAExJ,UAAU,CAAG,KAAH,CAAW,kBADpC,CAEI,OAAO,CAAEqN,WAFb,UAIKrN,UAAU,CAAG,UAAH,CAAgB,SAJ/B,EAFJ,GADJ,CAWH,CAEcoN,kEAAf,E;;;;;AC/FA,QAASQ,QAAT,EAAe,CACX,mBACI,2BAAC,qBAAD,wBACI,2BAAC,gCAAD,wBACI,2BAAC,sBAAD,wBACI,2BAAC,0BAAD,wBACI,4BAAC,sBAAD,yBACI,2BAAC,mBAAD,IADJ,cAEI,6DACI,kEADJ,cAEI,2BAAC,iBAAD,IAFJ,GAFJ,cAMI,8DACI,2BAAC,aAAD,IADJ,cAEI,2BAAC,yBAAD,IAFJ,cAGI,2BAAC,6BAAD,IAHJ,GANJ,GADJ,EADJ,EADJ,EADJ,EADJ,CAsBH,CAIcA,mDAAf,E;;ACpCAC,mBAAQ,CAACC,MAAT,eACE;AACE,2BAAC,OAAD,IAFJ,CAGE;AACArF,QAAQ,CAACsF,cAAT,CAAwB,MAAxB,CAJF,E","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","// extracted by mini-css-extract-plugin","import backendStackOutput from './backendStackOutput.json';\n\n// Backend stack output in the format of:\n// [[{\n//     OutputKey: xxx, \n//     OutputValue: xxx\n// }...]]\n\nfunction getValueFromStackOutput(key) {\n    const index = backendStackOutput[0].findIndex(o => o.OutputKey === key);\n    return backendStackOutput[0][index].OutputValue; \n}\n\nexport const HTTP_API_ENDPOINT = getValueFromStackOutput('HttpApiEndpoint');\nexport const WEBSOCKET_API_ENDPOINT = getValueFromStackOutput('WebsocketApiEndpoint');\nexport const COGNITO_USER_POOL_ID = getValueFromStackOutput('CognitoUserPoolId');\nexport const COGNITO_USER_POOL_CLIENT_ID = getValueFromStackOutput('CognitoClientId');\nexport const REGION = getValueFromStackOutput('Region');\n","import Amplify from 'aws-amplify';\nimport { \n    REGION,\n    COGNITO_USER_POOL_ID,\n    COGNITO_USER_POOL_CLIENT_ID,\n} from '../config';\n\nAmplify.configure({\n    Auth: {\n        region: REGION,\n        userPoolId: COGNITO_USER_POOL_ID,\n        userPoolWebClientId: COGNITO_USER_POOL_CLIENT_ID,\n        authenticationFlowType: 'USER_PASSWORD_AUTH',\n    }\n});","import React from 'react';\n\nconst IVSContext = React.createContext();\n\nexport default IVSContext;","import React from 'react';\nimport IVSContext from './IVSContext';\n\nfunction getQueryStringValue (key) {\n    return decodeURIComponent(window.location.search.replace(new RegExp(\"^(?:.*[&\\\\?]\" + encodeURIComponent(key).replace(/[.+*]/g, \"\\\\$&\") + \"(?:\\\\=([^&]*))?)?.*$\", \"i\"), \"$1\"));\n}\n\nconst IVSProvider = ({ children }) => {\n    const value = {\n        channelArn: window.atob(getQueryStringValue('channel')),\n        playbackUrl: window.atob(getQueryStringValue('playback')),\n    };\n\n    return (\n        <IVSContext.Provider value={value}>\n            {children}\n        </IVSContext.Provider>\n    );\n};\n\nexport default IVSProvider\n","import React from 'react';\n\nconst UserContext = React.createContext();\n\nexport default UserContext;","import React from 'react';\nimport UserContext from './UserContext';\n\nexport const SET_SIGNED_IN_USER_ACTION = 'SET_SIGNED_IN_USER_ACTION';\nexport const SET_SIGNED_OUT_USER_ACTION = 'SET_SIGNED_OUT_USER_ACTION';\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case SET_SIGNED_IN_USER_ACTION:\n            return {\n                ...state,\n                isSignedIn: true,\n                isModerator: action.isModerator,\n                accessJWTToken: action.accessJWTToken,\n            };\n        case SET_SIGNED_OUT_USER_ACTION:\n            return { ...initialState };\n        default:\n            throw new Error('unexpected action type');\n    }\n};\n\nconst initialState = {\n    isSignedIn: false,\n    isModerator: false,\n    accessToken: '',\n}\n\nconst UserProvider = ({ children }) => {\n    const value = React.useReducer(reducer, initialState);\n    return (\n        <UserContext.Provider value={value}>\n            {children}\n        </UserContext.Provider>\n    );\n};\n\nexport default UserProvider","import React from 'react';\n\nconst QuestionContext = React.createContext();\n\nexport default QuestionContext;","import React from 'react';\nimport QuestionContext from './QuestionContext';\n\nexport const CLIENT_ADD_QUESTION_ACTION = 'CLIENT_ADD_QUESTION_ACTION';\nexport const CLIENT_DELETE_QUESTION_ACTION = 'CLIENT_DELETE_QUESTION_ACTION';\nexport const CLIENT_INCREMENT_VOTE_ACTION = 'CLIENT_INCREMENT_VOTE_ACTION';\nexport const CLIENT_DECREMENT_VOTE_ACTION = 'CLIENT_DECREMENT_VOTE_ACTION';\n\nexport const SERVER_UPDATE_QUESTIONS_ACTION = 'SERVER_UPDATE_QUESTIONS_ACTION';\nexport const SERVER_SET_QUESTIONS_ACTION = 'SERVER_SET_QUESTIONS_ACTION';\n\nexport const SET_VOTES_ACTION = 'SET_VOTES_ACTION';\n\n// questionStates: [{\n//     question: {\n//         Id: String,\n//         Content: String,\n//         Votes: Number,\n//         Answered: Boolean,\n//         Current: Boolean\n//     }\n//     timeStamp: Number,\n//     removed: Boolean,\n// }...]\n\nfunction pickQuestionProperties ({\n    Id, Content, Votes, Answered, Current\n}) {\n    return {\n        Id, Content, Votes, Answered, Current\n    }\n}\n\nfunction sortByVote(questionState1, questionState2) {\n    return questionState2.question.Votes - questionState1.question.Votes;\n}\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case CLIENT_ADD_QUESTION_ACTION:\n            const newQuestionState = { \n                question: {\n                    Id: action.id,\n                    Content: action.content,\n                    Votes: 0,\n                    Answered: false,\n                    Current: false,\n                },\n                timeStamp: 0,\n                removed: false,\n            };\n\n            return {\n                ...state,\n                questionStates: state.questionStates.concat([newQuestionState]).sort(sortByVote)\n            };\n        case CLIENT_DELETE_QUESTION_ACTION:\n            return {\n                ...state,\n                questionStates: state.questionStates.map(s => {\n                    if (s.question.Id === action.id) {\n                        s.removed = true\n                    }\n                    return s;\n                }).sort(sortByVote)\n            };\n        case CLIENT_INCREMENT_VOTE_ACTION:\n            return {\n                ...state,\n                questionStates: state.questionStates.map(s => {\n                    if (s.question.Id === action.id) {\n                        s.question.Votes = s.question.Votes + 1;\n                    }\n                    return s;\n                }).sort(sortByVote)\n            }\n        case CLIENT_DECREMENT_VOTE_ACTION:\n            return {\n                ...state,\n                questionStates: state.questionStates.map(s => {\n                    if (s.question.Id === action.id) {\n                        s.question.Votes = s.question.Votes - 1;\n                    }\n                    return s;\n                }).sort(sortByVote)\n            }\n        case SERVER_UPDATE_QUESTIONS_ACTION:\n            action.updates.forEach(update => {\n                const i = state.questionStates.findIndex(s => update.question.Id === s.question.Id)\n                // Don't process if change older than client's change\n                if (i !== -1 && update.timeStamp < state.questionStates[i].timeStamp) {\n                    return\n                }\n                switch (update.change) {\n                    case 'INSERT':\n                        if (i === -1) {\n                            state.questionStates = state.questionStates.concat([{\n                                question: pickQuestionProperties(update.question),\n                                timeStamp: update.timeStamp,\n                                removed: false,\n                            }]);\n                        } else {\n                            state.questionStates[i].timeStamp = update.timeStamp;\n                        }\n                        break;\n                    case 'MODIFY':\n                        if (i === -1) {\n                            state.questionStates = state.questionStates.concat([{\n                                question: pickQuestionProperties(update.question),\n                                timeStamp: update.timeStamp,\n                                removed: false,\n                            }]);\n                        } else {\n                            state.questionStates[i].timeStamp = update.timeStamp;\n                            state.questionStates[i].question = pickQuestionProperties(update.question)\n                        }\n                        break;\n                    case 'REMOVE':\n                        if (i === -1) {\n                            state.questionStates = state.questionStates.concat([{\n                                question: pickQuestionProperties(update.question),\n                                timeStamp: update.timeStamp,\n                                removed: true,\n                            }]);\n                        } else {\n                            state.questionStates[i].timeStamp = update.timeStamp;\n                            state.questionStates[i].removed = true;\n                        }\n                        break;\n                    default:\n                        return;\n                }\n            })\n\n            return {\n                ...state,\n                questionStates: state.questionStates.sort(sortByVote),\n            };\n        case SERVER_SET_QUESTIONS_ACTION:\n            return {\n                ...state,\n                questionStates: action.questions.map(q => ({\n                    question: pickQuestionProperties(q),\n                    timeStamp: 0,\n                    removed: false,\n                })).sort(sortByVote),\n            };\n        default:\n            throw new Error('unexpected action type');\n    }\n};\n\nconst initialState = { questionStates: [] }\n\nconst QuestionProvider = ({ children }) => {\n    const value = React.useReducer(reducer, initialState);\n    return (\n        <QuestionContext.Provider value={value}>\n            {children}\n        </QuestionContext.Provider>\n    );\n};\n\nexport default QuestionProvider","import React from 'react';\n\nconst PlayerMetadataContext = React.createContext();\n\nexport default PlayerMetadataContext;","import React from 'react';\nimport PlayerMetadataContext from './PlayerMetadataContext';\n\nexport const SET_CURRENT_QUESTION_ACTION = 'SET_CURRENT_QUESTION_ACTION';\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case SET_CURRENT_QUESTION_ACTION:\n            return {\n                ...state,\n                currentQuestion: action.question,\n            }\n        default:\n            throw new Error('unexpected action type');\n    }\n};\n\nconst initialState = { currentQuestion: null }\n\nconst PlayerMetadataProvider = ({ children }) => {\n    const value = React.useReducer(reducer, initialState);\n    return (\n        <PlayerMetadataContext.Provider value={value}>\n            {children}\n        </PlayerMetadataContext.Provider>\n    );\n};\n\nexport default PlayerMetadataProvider","import React from 'react';\n\nconst VoteContext = React.createContext();\n\nexport default VoteContext;","import React from 'react';\nimport VoteContext from './VoteContext';\n\nexport const ADD_VOTE_ACTION = 'ADD_VOTE_ACTION';\nexport const DELETE_VOTE_ACTION = 'DELETE_VOTE_ACTION';\nexport const SET_VOTES_ACTION = 'SET_VOTES_ACTION';\nexport const CLEAR_VOTES_ACTION = 'CLEAR_VOTES_ACTION';\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case ADD_VOTE_ACTION:\n            return {\n                ...state,\n                questionIdMap: {\n                    ...state.questionIdMap,\n                    [action.questionId]: true,\n                },\n            }\n        case DELETE_VOTE_ACTION:\n            const newQuestionIdMap = state.questionIdMap;\n            delete newQuestionIdMap[action.questionId];\n            return {\n                ...state,\n                questionIdMap: { ...newQuestionIdMap }\n            }\n        case SET_VOTES_ACTION:\n            return {\n                ...state,\n                questionIdMap: action.questionIdMap,\n            }\n        case CLEAR_VOTES_ACTION:\n            return {\n                ...state,\n                questionIdMap: {},\n            }\n        default:\n            throw new Error('unexpected action type');\n    }\n};\n\nconst initialState = { questionIdMap: {} }\n\nconst VoteProvider = ({ children }) => {\n    const value = React.useReducer(reducer, initialState);\n    return (\n        <VoteContext.Provider value={value}>\n            {children}\n        </VoteContext.Provider>\n    );\n};\n\nexport default VoteProvider","import React from 'react';\nimport IVSContext from './providers/IVSContext';\nimport QuestionsContext from './providers/QuestionContext';\nimport { \n    SERVER_SET_QUESTIONS_ACTION,\n    SERVER_UPDATE_QUESTIONS_ACTION,\n} from './providers/QuestionProvider'\nimport { WEBSOCKET_API_ENDPOINT } from './config';\n\nclass WebSocketClient extends React.Component {\n    static contextType = QuestionsContext; \n    \n    constructor() {\n        super();\n        this.channelArn = '';\n    }\n\n    setupWebSocket(channelArn){\n        if (this.channelArn === channelArn) {\n            return;\n        }\n        this.channelArn = channelArn;\n        const webSocketUrl = WEBSOCKET_API_ENDPOINT + `?channelarn=` + channelArn;\n\n        this.ws = new WebSocket(webSocketUrl);\n\n        this.ws.onmessage = msg => {\n            const [, dispatch] = this.context;\n            const message = JSON.parse(msg.data)\n            switch(message.type) {\n                case 'INITIAL_STATE':\n                    console.debug('INIT STATE', message.questions)\n                    dispatch({\n                        type: SERVER_SET_QUESTIONS_ACTION,\n                        questions: message.questions,\n                    })\n                    break;\n                case 'UPDATES':\n                    console.debug('UPDATE', message.updates)\n                    dispatch({\n                        type: SERVER_UPDATE_QUESTIONS_ACTION,\n                        updates: message.updates,\n                    })\n                    break;\n                default:\n                    return;\n            }\n        }\n    }\n\n    render(){\n        return(\n            <IVSContext.Consumer>\n                {({ channelArn }) => this.setupWebSocket(channelArn)}\n            </IVSContext.Consumer> \n        )\n    }\n}\n\nexport default WebSocketClient","import React from 'react';\nimport QuestionContext from '../providers/QuestionContext';\nimport PlayerMetadataContext from '../providers/PlayerMetadataContext';\n\nfunction CurrentQuestion() {\n    const [{ questionStates }] = React.useContext(QuestionContext);\n    const [{ currentQuestion: playerCurrentQuestion }] = React.useContext(PlayerMetadataContext);\n\n    let showCurrentQuestion = true;\n    let content\n    let votes\n    if (playerCurrentQuestion === null) {\n        const index = questionStates.findIndex(({question}) => question.Current);\n        if (index === -1) {\n            showCurrentQuestion = false;\n        } else {\n            content = questionStates[index].question.Content;\n            votes = questionStates[index].question.Votes;\n        }\n    } else {\n        content = playerCurrentQuestion.Content;\n        votes = playerCurrentQuestion.Votes\n    }\n\n    return (\n        showCurrentQuestion ? (\n            <div className=\"current-question\">\n                <div className=\"c-item\">\n                    <div className=\"c-item__card\">\n                        <div className=\"c-item__votes\">\n                            <svg className=\"upvote-btn__svg\" width=\"22\" height=\"22\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M3.66797 11L4.96047 12.2925L10.0846 7.1775V18.3333H11.918V7.1775L17.033 12.3017L18.3346 11L11.0013 3.66666L3.66797 11Z\"/></svg>\n                            <span className=\"upvote-btn__count\">{votes}</span>\n                        </div>\n                        <div className=\"c-item__content\">\n                            <strong>Current question</strong>\n                            <p>{content}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ) : null\n    )\n}\n\nexport default CurrentQuestion;\n","import React from 'react';\nimport IVSContext from '../providers/IVSContext';\nimport PlayerMetadataContext from '../providers/PlayerMetadataContext';\nimport CurrentQuestion from './CurrentQuestion';\nimport { SET_CURRENT_QUESTION_ACTION } from '../providers/PlayerMetadataProvider';\n\nfunction Player() {\n    const { playbackUrl } = React.useContext(IVSContext);\n    const [, dispatch] = React.useContext(PlayerMetadataContext);\n\n    React.useEffect(() => {\n        // eslint-disable-next-line no-undef\n        const videojs = window.videojs,\n              registerIVSTech = window.registerIVSTech,\n              registerIVSQualityPlugin = window.registerIVSQualityPlugin;\n\n        // Set up IVS playback tech and quality plugin\n        const IVSPlugin = videojs.getPlugin(\"getIVSPlayer\");\n\n        // If the plugins haven't been loaded, load them.\n        if (!IVSPlugin) {\n          registerIVSTech(videojs);\n          registerIVSQualityPlugin(videojs);\n        }\n\n        const videoJsOptions = {\n          techOrder: [\"AmazonIVS\"],\n          autoplay: true,\n          muted: true,\n        };\n\n        // instantiate video.js\n        const player = videojs(\"amazon-ivs-videojs\", videoJsOptions);\n        const ivsPlayer = player.getIVSPlayer();\n        const PlayerEventType = player.getIVSEvents().PlayerEventType;\n\n        ivsPlayer.addEventListener(PlayerEventType.TEXT_METADATA_CUE, (cue) => {\n            const metadataText = cue.text;\n            console.log('Timed metadata: ', metadataText);\n            dispatch({\n                type: SET_CURRENT_QUESTION_ACTION,\n                question: JSON.parse(metadataText),\n            });\n        });\n\n        player.ready(() => {\n          player.enableIVSQualityPlugin();\n          player.src(playbackUrl);\n          player.play();\n        });\n\n        return () => {\n            player.dispose();\n        };\n        // eslint-disable-next-line\n    }, []);\n\n    return (\n        <div className=\"player-wrapper\">\n            <CurrentQuestion />\n            <div data-vjs-player>\n                <video id=\"amazon-ivs-videojs\" className=\"video-js vjs-fluid\" playsInline />\n            </div>\n        </div>\n    );\n  }\n\nexport default Player;\n","import React from 'react';\nimport QuestionContext from '../../providers/QuestionContext';\nimport IVSContext from '../../providers/IVSContext';\nimport VoteContext from '../../providers/VoteContext';\nimport UserContext from '../../providers/UserContext';\nimport {\n    ADD_VOTE_ACTION,\n    DELETE_VOTE_ACTION,\n}  from '../../providers/VoteProvider';\nimport {\n    CLIENT_DECREMENT_VOTE_ACTION,\n    CLIENT_INCREMENT_VOTE_ACTION,\n}  from '../../providers/QuestionProvider';\nimport { HTTP_API_ENDPOINT } from '../../config';\n\nconst ADD_VOTE_ENUM = 'ADD_VOTE';\nconst DELETE_VOTE_ENUM = 'DELETE_VOTE';\nconst NONE_ENUM = 'NONE';\n\nconst DELETE_VOTE_ENDPOINT = HTTP_API_ENDPOINT + '/deleteVote';\nconst ADD_VOTE_ENDPOINT = HTTP_API_ENDPOINT + '/addVote';\n\nfunction VoteButton({\n    votes,\n    questionId,\n    disabled,\n}) {\n    const [,questionDispatch] = React.useContext(QuestionContext);\n    const [{ questionIdMap }, voteDispatch] = React.useContext(VoteContext);\n    const { channelArn } = React.useContext(IVSContext);\n    const [{ accessJWTToken }] = React.useContext(UserContext);\n    const [postVoteType, setPostVoteType] = React.useState(NONE_ENUM);\n\n    React.useEffect(() => {\n        if (postVoteType !== NONE_ENUM) {\n            const postVote = async () => {\n                try {\n                    questionDispatch({\n                        type: postVoteType === DELETE_VOTE_ENUM  ? CLIENT_DECREMENT_VOTE_ACTION : CLIENT_INCREMENT_VOTE_ACTION,\n                        id: questionId,\n                    });\n                    voteDispatch({\n                        type: postVoteType === DELETE_VOTE_ENUM  ? DELETE_VOTE_ACTION : ADD_VOTE_ACTION,\n                        questionId,\n                    })\n\n                    const url = postVoteType === DELETE_VOTE_ENUM ? DELETE_VOTE_ENDPOINT : ADD_VOTE_ENDPOINT;\n                    const response = await fetch(url,{\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            'Authorization': accessJWTToken,\n                        },\n                        body: JSON.stringify({\n                            channelArn,\n                            questionId,\n                        }),\n                    });\n\n                    if (response.status !== 200) {\n                        throw new Error();\n                    }\n                } catch (e){\n                    console.log('Failed to add/delete vote', e);\n                    questionDispatch({\n                        type: postVoteType === DELETE_VOTE_ENUM  ? CLIENT_INCREMENT_VOTE_ACTION : CLIENT_DECREMENT_VOTE_ACTION,\n                        id: questionId,\n                    });\n                    voteDispatch({\n                        type: postVoteType === DELETE_VOTE_ENUM  ? ADD_VOTE_ACTION : DELETE_VOTE_ACTION,\n                        questionId,\n                    })\n                }\n            };\n\n            postVote();\n        }\n        // eslint-disable-next-line\n    }, [postVoteType]);\n\n    const votedState = !!questionIdMap[questionId];\n\n    let className = ''\n    if (votedState) {\n        className = 'btn rounded upvote-btn has-voted';\n    } else if (disabled) {\n        className = 'btn rounded upvote-btn';\n    } else {\n        className = 'btn btn--primary rounded upvote-btn';\n    }\n\n    return (\n        <button\n            className={className}\n            onClick={() => setPostVoteType(votedState ? DELETE_VOTE_ENUM : ADD_VOTE_ENUM)}\n            disabled={disabled}\n        >\n            <svg className=\"upvote-btn__svg\" width=\"22\" height=\"22\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M3.66797 11L4.96047 12.2925L10.0846 7.1775V18.3333H11.918V7.1775L17.033 12.3017L18.3346 11L11.0013 3.66666L3.66797 11Z\"/></svg>\n            <span className=\"upvote-btn__count\">{votes}</span>\n        </button>\n    )\n}\n\nexport default VoteButton;\n","import React from 'react';\n\nfunction useOutsideClick(ref, onClick) {\n    React.useEffect(() => {\n        function handleClickOutside(event) {\n            if (ref.current && !ref.current.contains(event.target)) {\n                onClick();\n            }\n        }\n\n        document.addEventListener(\"mousedown\", handleClickOutside);\n        return () => {\n            document.removeEventListener(\"mousedown\", handleClickOutside);\n        };\n    }, [ref, onClick]);\n}\n\nexport default useOutsideClick ","import React from 'react';\nimport useOutsideClick from '../../util/useOutsideClick';\nimport IVSContext from '../../providers/IVSContext';\nimport QuestionContext from '../../providers/QuestionContext';\nimport UserContext from '../../providers/UserContext';\nimport {\n    CLIENT_DELETE_QUESTION_ACTION,\n} from '../../providers/QuestionProvider'\nimport { HTTP_API_ENDPOINT } from '../../config';\n\nconst DELETE_QUESTION_ENDPOINT = HTTP_API_ENDPOINT + '/deleteQuestion';\n\nfunction DeleteQuestionModal({\n    questionId,\n    onHideModal,\n}) {\n    const [,dispatch] = React.useContext(QuestionContext);\n    const { channelArn } = React.useContext(IVSContext);\n    const [{ accessJWTToken }] = React.useContext(UserContext);\n    const [isPosting, setIsPosting] = React.useState(false);\n    const modalRef = React.useRef(null);\n    useOutsideClick(modalRef, onHideModal);\n\n    React.useEffect(() => {\n        if (isPosting) {\n            const postDeleteQuestion = async () => {\n                try {\n                    const questionResponse = await fetch(DELETE_QUESTION_ENDPOINT, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            'Authorization': accessJWTToken,\n                        },\n                        body: JSON.stringify({\n                            channelArn,\n                            id: questionId,\n                        }),\n                    });\n                    if (questionResponse.status === 200) {\n                        dispatch({\n                            type: CLIENT_DELETE_QUESTION_ACTION,\n                            id: questionId,\n                        });\n                    } else {\n                        throw new Error();\n                    }\n                } catch (e){\n                    console.log('Failure in deleting question', e);\n                }\n                onHideModal();\n            };\n\n            postDeleteQuestion();\n        }\n        // eslint-disable-next-line\n    }, [isPosting]);\n\n    return (\n        <div className=\"modal\">\n            <div className=\"modal__el\" ref={modalRef}>\n                <h2 className=\"mg-b-1\">Are you sure you want to delete this question?</h2>\n                <div className=\"grid grid--responsive grid--2\">\n                    <button\n                        type={'button'}\n                        className=\"btn btn--secondary mg-t-1\"\n                        onClick={onHideModal}\n                    >\n                        Cancel\n                    </button>\n                    <button\n                        type={'button'}\n                        className=\"btn btn--destruct mg-t-1\"\n                        onClick={() => setIsPosting(true)}\n                    >\n                        Delete\n                    </button>\n                </div>\n            </div>\n            <div className=\"modal__overlay\"></div>\n        </div>\n    )\n}\n\nexport default DeleteQuestionModal;\n","import React from 'react';\nimport DeleteQuestionModal from './DeleteQuestionModal';\n\nfunction DeleteQuestionButton({ questionId }) {\n    const [modalVisible, setModalVisibility] = React.useState(false);\n    const showModal = () => setModalVisibility(true)\n    const hideModal = () => setModalVisibility(false)\n    const modal = modalVisible ? (\n        <DeleteQuestionModal\n            questionId={questionId}\n            onHideModal={hideModal}\n        />\n    ) : null;\n    \n    return (\n        <React.Fragment>\n            {modal}\n            <button\n                onClick={showModal}\n                className=\"btn btn--icon btn--destruct\"\n                title=\"Delete\"\n            >\n                <svg className=\"icon icon--24 icon--inverted\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM19 4H15.5L14.5 3H9.5L8.5 4H5V6H19V4Z\" /></svg>\n            </button>\n        </React.Fragment>\n    )\n}\n\nexport default DeleteQuestionButton;","import React from 'react';\nimport useOutsideClick from '../../util/useOutsideClick';\nimport IVSContext from '../../providers/IVSContext';\nimport UserContext from '../../providers/UserContext';\nimport { HTTP_API_ENDPOINT } from '../../config';\n\nconst CURRENT_QUESTION_ENDPOINT = HTTP_API_ENDPOINT + '/setCurrentQuestion';\n\nfunction CurrentQuestionModal({\n    questionId,\n    onHideModal,\n}) {\n    const { channelArn } = React.useContext(IVSContext);\n    const [{ accessJWTToken }] = React.useContext(UserContext);\n    const [isPosting, setIsPosting] = React.useState(false);\n    const modalRef = React.useRef(null);\n    useOutsideClick(modalRef, onHideModal);\n\n    React.useEffect(() => {\n        if (isPosting) {\n            const postCurrentQuestion = async () => {\n                try {\n                    const questionResponse = await fetch(CURRENT_QUESTION_ENDPOINT, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            'Authorization': accessJWTToken,\n                        },\n                        body: JSON.stringify({\n                            channelArn,\n                            id: questionId,\n                        }),\n                    });\n                    if (questionResponse.status !== 200) {\n                        throw new Error();\n                    }\n                } catch (e){\n                    console.log('Failure in setting current question', e);\n                }\n                onHideModal();\n            };\n\n            postCurrentQuestion();\n        }\n        // eslint-disable-next-line\n    }, [isPosting]);\n\n    return (\n        <div className=\"modal\">\n            <div className=\"modal__el\" ref={modalRef}>\n                <h2 className=\"mg-b-1\">Mark this question as current?</h2>\n                <div className=\"grid grid--responsive grid--2\">\n                    <button\n                        type={'button'}\n                        className=\"btn btn--secondary mg-t-1\"\n                        onClick={onHideModal}\n                    >\n                        Cancel\n                    </button>\n                    <button\n                        type={'button'}\n                        className=\"btn btn--confirm mg-t-1\"\n                        onClick={() => setIsPosting(true)}\n                    >\n                        Mark as current\n                    </button>\n                </div>\n            </div>\n            <div className=\"modal__overlay\"></div>\n        </div>\n    )\n}\n\nexport default CurrentQuestionModal;\n","import React from 'react';\nimport CurrentQuestionModal from './CurrentQuestionModal';\n\nfunction CurrentQuestionButton({ questionId }) {\n    const [modalVisible, setModalVisibility] = React.useState(false);\n    const showModal = () => setModalVisibility(true)\n    const hideModal = () => setModalVisibility(false)\n    const modal = modalVisible ? (\n        <CurrentQuestionModal\n            questionId={questionId}\n            onHideModal={hideModal}\n        />\n    ) : null;\n    \n    return (\n        <React.Fragment>\n            {modal}\n            <button\n                onClick={showModal}\n                className=\"btn btn--icon btn--confirm\"\n                title=\"Mark as current\"\n            >\n                <svg className=\"icon icon--24\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.99 20.4998L19 9.49976C19 8.82976 18.67 8.22976 18.16 7.86976L12 3.49976L5.84 7.86976C5.33 8.22976 5 8.82976 5 9.49976L5.01 20.4998L12 15.6598L18.99 20.4998Z\" /></svg>\n            </button>\n        </React.Fragment>\n    )\n}\n\nexport default CurrentQuestionButton;","import React from 'react';\nimport VoteButton from './VoteButton';\nimport DeleteButton from './DeleteQuestionButton';\nimport CurrentQuestionButton from './CurrentQuestionButton';\nimport UserContext from '../../providers/UserContext';\n\nfunction Question({\n    content, \n    id,\n    votes, \n}) {\n    const [{ isSignedIn, isModerator }] = React.useContext(UserContext);\n    return (\n        <div className=\"q-item\">\n            <div className=\"q-item__card\">\n                <VoteButton \n                    votes={votes}\n                    questionId={id}\n                    disabled={!isSignedIn}\n                />\n                <p className=\"q-item__content\">{content}</p>\n            </div>\n                {   \n                    isModerator &&\n                    <div className=\"q-item__moderation\">\n                        <CurrentQuestionButton questionId={id} />\n                        <DeleteButton questionId={id} />\n                    </div>\n                }\n        </div>\n    )\n}\n\nexport default Question;","import React from 'react';\nimport QuestionContext from '../providers/QuestionContext';\nimport PlayerMetadataContext from  '../providers/PlayerMetadataContext';\nimport Question from './Question/Question';\n\nfunction shouldShowQuestion(questionState, playerCurrentQuestion) {\n    if (questionState.removed || questionState.question.Answered) {\n        return false;\n    }\n    if (questionState.question.Current) {\n        if (playerCurrentQuestion === null || (playerCurrentQuestion.Id === questionState.question.Id)) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction QuestionList() {\n    const [{ questionStates }] = React.useContext(QuestionContext);\n    const [{ currentQuestion: playerCurrentQuestion }] = React.useContext(PlayerMetadataContext);\n    let questionComponents = []\n    questionStates.forEach(s => {\n        if (shouldShowQuestion(s, playerCurrentQuestion)) {\n            questionComponents.push(\n                <Question\n                    key={`${s.question.Id}`} \n                    content={s.question.Content}\n                    votes={s.question.Votes}\n                    id={s.question.Id}\n                />\n            );\n        }\n    })\n    return <div className=\"questions\">{questionComponents}</div>\n}\n\nexport default QuestionList;","import React from 'react';\nimport useOutsideClick from '../util/useOutsideClick';\nimport IVSContext from '../providers/IVSContext';\nimport QuestionContext from '../providers/QuestionContext';\nimport UserContext from '../providers/UserContext';\nimport VoteContext from '../providers/VoteContext';\nimport {\n    CLIENT_ADD_QUESTION_ACTION,\n    CLIENT_INCREMENT_VOTE_ACTION,\n} from '../providers/QuestionProvider'\nimport { ADD_VOTE_ACTION } from '../providers/VoteProvider';\nimport { HTTP_API_ENDPOINT } from '../config';\n\nconst ADD_QUESTION_ENDPOINT = HTTP_API_ENDPOINT + '/addQuestion';\nconst ADD_VOTE_ENDPOINT = HTTP_API_ENDPOINT + '/addVote';\n\nfunction AddQuestionModal({\n    onHideModal\n}) {\n    const [,questionDispatch] = React.useContext(QuestionContext);\n    const [,voteDispatch] = React.useContext(VoteContext);\n    const { channelArn } = React.useContext(IVSContext);\n    const [{ accessJWTToken }] = React.useContext(UserContext);\n    const [isPosting, setIsPosting] = React.useState(false);\n    const [textInput, setTextInput] = React.useState('');\n    const modalRef = React.useRef(null);\n    useOutsideClick(modalRef, onHideModal);\n\n    React.useEffect(() => {\n        if (isPosting) {\n            const postAddQuestion = async () => {\n                try {\n                    const questionResponse = await fetch(ADD_QUESTION_ENDPOINT, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            'Authorization': accessJWTToken,\n                        },\n                        body: JSON.stringify({\n                            channelArn,\n                            question: textInput,\n                        }),\n                    });\n                    if (questionResponse.status === 200) {\n                        const { id } = await questionResponse.json();\n                        questionDispatch({\n                            type: CLIENT_ADD_QUESTION_ACTION,\n                            id,\n                            content: textInput,\n                        });\n\n                        const voteResponse = await fetch(ADD_VOTE_ENDPOINT, {\n                            method: 'POST',\n                            headers: {\n                                'Content-Type': 'application/json',\n                                'Authorization': accessJWTToken,\n                            },\n                            body: JSON.stringify({\n                                channelArn,\n                                questionId: id,\n                            }),\n                        });\n\n                        if (voteResponse.status === 200) {\n                            questionDispatch({\n                                type: CLIENT_INCREMENT_VOTE_ACTION,\n                                id,\n                            });\n                            voteDispatch({\n                                type: ADD_VOTE_ACTION,\n                                questionId: id,\n                            });\n                        }\n                    } else {\n                        throw new Error();\n                    }\n                } catch (e){\n                    console.log('Failure in adding and voting new question', e);\n                }\n                onHideModal();\n            };\n\n            postAddQuestion();\n        }\n        // eslint-disable-next-line\n    }, [isPosting]);\n\n    return (\n        <div className=\"modal\">\n            <div className=\"modal__el\" ref={modalRef}>\n                <h2 className=\"mg-b-1\">Submit a question</h2>\n                <form>\n                <fieldset>\n                    <textarea\n                        rows={'8'}\n                        placeholder={'Type here...'}\n                        onChange={e => setTextInput(e.target.value)}\n                        disabled={isPosting}\n                        value={textInput}\n                    />\n                    <p><em>Submissions are anonymous</em></p>\n                    <button\n                        type={'submit'}\n                        className=\"btn btn--primary mg-t-1\"\n                        onClick={e => {\n                            e.preventDefault();\n                            setIsPosting(true)\n                        }}\n                    >\n                        Submit\n                    </button>\n                </fieldset>\n                </form>\n            </div>\n            <div className=\"modal__overlay\"></div>\n        </div>\n    )\n}\n\nexport default AddQuestionModal;\n","import React from 'react';\nimport AddQuestionModal from './AddQuestionModal';\nimport UserContext from '../providers/UserContext';\n\nfunction AddQuestionButton() {\n    const [modalVisible, setModalVisibility] = React.useState(false);\n    const [{ isSignedIn }] = React.useContext(UserContext);\n    const showModal = () => setModalVisibility(true)\n    const hideModal = () => setModalVisibility(false)\n    \n    return (\n        <React.Fragment>\n            {modalVisible ? (\n                <AddQuestionModal\n                    onHideModal={hideModal}\n                />\n            ) : null}\n            {isSignedIn ? (\n                <button\n                    onClick={showModal}\n                    className=\"btn btn--floating btn--fixed\"\n                >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                        <path d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n                        <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"></path>\n                    </svg>\n                </button>\n            ): null}\n        </React.Fragment>\n    )\n}\n\nexport default AddQuestionButton;","import React from 'react';\nimport useOutsideClick from '../util/useOutsideClick';\nimport { Authenticator, SignIn, SignUp, ConfirmSignUp, Greetings } from 'aws-amplify-react';\n\n\nfunction SignInModal({\n    onHideModal\n}) {\n    const modalRef = React.useRef(null);\n    useOutsideClick(modalRef, onHideModal);\n\n    const handleAuthStateChange = (state) => {\n        if (state === 'signedIn') {\n            onHideModal();\n        }\n    }\n\n    const MyTheme = {\n        sectionHeaderContent: {\n            fontSize: '2.4rem',\n            fontWeight: 'bold',\n        },\n        sectionBody: {\n            'width': '100%',\n            'margin': '2rem 0',\n            'display': 'flex',\n            flexDirection: 'column',\n            flexGrow: '1',\n        },\n        formField: {\n            'margin': '0.5rem 0',\n        },\n        input: {\n            'width': '100%',\n        },\n        a: {\n            fontWeight: 'bold',\n            'cursor': 'pointer',\n            paddingLeft: '0.5rem',\n        },\n        sectionFooter: {\n            'width': '100%',\n        },\n        sectionFooterPrimaryContent: {\n            'display': 'flex',\n        },\n        button: {\n            'display': 'flex',\n            'width': '100%',\n            alignItems: 'center',\n            alignContent: 'center',\n            justifyContent: 'center',\n            fontWeight: 'bold',\n            'color': 'var(--color-text-inverted)',\n            'background': 'var(--color-bg-button-primary-default)',\n        },\n        selectInput: {\n            'display': 'grid',\n            gridTemplateColumns: 'auto 1fr',\n            'gridGap': '1rem',\n        },\n        sectionFooterSecondaryContent: {\n            'display': 'flex',\n            'margin': '1rem 0 0 0',\n        },\n    }\n\n    return (\n        <div className=\"modal\">\n            <div className=\"modal__el modal__el--auth\" ref={modalRef}>\n                <Authenticator theme={MyTheme} hideDefault={true} onStateChange={handleAuthStateChange}>\n                    <SignIn/>\n                    <SignUp/>\n                    <ConfirmSignUp/>\n                    <Greetings/>\n                </Authenticator>\n            </div>\n            <div className=\"modal__overlay\"></div>\n        </div>\n    )\n}\n\nexport default SignInModal;","import React from 'react';\nimport SignInModal from './SignInModal';\nimport UserContext from '../providers/UserContext';\nimport IVSContext from '../providers/IVSContext';\nimport VoteContext from '../providers/VoteContext';\nimport {\n    SET_SIGNED_IN_USER_ACTION,\n    SET_SIGNED_OUT_USER_ACTION,\n} from '../providers/UserProvider';\nimport {\n    SET_VOTES_ACTION,\n    CLEAR_VOTES_ACTION,\n} from '../providers/VoteProvider';\nimport { Hub, Auth } from 'aws-amplify'\nimport { HTTP_API_ENDPOINT } from '../config';\n\nconst GET_VOTES_ENDPOINT = HTTP_API_ENDPOINT + '/getVotes';\n\nasync function fetchSetUserInfoVotes(userDispatch, voteDispatch, signInUserSession, channelArn) {\n    userDispatch({\n        type: SET_SIGNED_IN_USER_ACTION,\n        isModerator: getModeratorStatusFromSession(signInUserSession),\n        accessJWTToken: signInUserSession.accessToken.jwtToken,\n    })\n\n    const votesResponse = await fetch(GET_VOTES_ENDPOINT, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': signInUserSession.accessToken.jwtToken,\n        },\n        body: JSON.stringify({ channelArn }),\n    });\n\n    if (votesResponse.status === 200) {\n        const votes = await votesResponse.json()\n        const questionIdMap = votes.reduce((map, v) => {\n            map[v.QuestionId] = true;\n            return map;\n        }, {})\n        voteDispatch({\n            type: SET_VOTES_ACTION,\n            questionIdMap,\n        })\n    }\n}\n\nfunction getModeratorStatusFromSession(session) {\n    const userGroups = session.idToken.payload['cognito:groups'];\n    if (userGroups !== undefined && userGroups.indexOf('moderator') !== -1) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\nfunction SignInButton() {\n    const [modalVisible, setModalVisibility] = React.useState(false);\n    const [{ isSignedIn }, userDispatch] = React.useContext(UserContext);\n    const { channelArn } = React.useContext(IVSContext);\n    const [, voteDispatch] = React.useContext(VoteContext)\n    const showModal = () => setModalVisibility(true)\n    const hideModal = () => setModalVisibility(false)\n    const handleClick = () => {\n        if (isSignedIn) {\n            Auth.signOut()\n        } else {\n            showModal()\n        }\n    }\n\n    React.useEffect(() => {\n        async function setAuthListeners() {\n            Hub.listen('auth', ({ payload }) => {\n                switch (payload.event) {\n                    case 'signIn':\n                        fetchSetUserInfoVotes(userDispatch, voteDispatch, payload.data.signInUserSession, channelArn);\n                    break;\n                    default: // case: 'signOut'\n                        userDispatch({ type: SET_SIGNED_OUT_USER_ACTION });\n                        voteDispatch({ type: CLEAR_VOTES_ACTION });\n                    break;\n                }\n            });\n            try {\n                const user = await Auth.currentAuthenticatedUser();\n                fetchSetUserInfoVotes(userDispatch, voteDispatch, user.signInUserSession, channelArn);\n            } catch(e) {\n                userDispatch({ type: SET_SIGNED_OUT_USER_ACTION });\n                voteDispatch({ type: CLEAR_VOTES_ACTION });\n            }\n        }\n        setAuthListeners();\n        // eslint-disable-next-line\n    }, [])\n\n    return (\n        <React.Fragment>\n            { modalVisible && <SignInModal onHideModal={hideModal}/> }\n            <button\n                className={isSignedIn ? 'btn' : 'btn btn--primary'}\n                onClick={handleClick}\n            >\n                {isSignedIn ? 'Sign out' : 'Sign in'}\n            </button>\n        </React.Fragment>\n    )\n}\n\nexport default SignInButton;\n","import React from 'react';\nimport './auth/AuthConfigure';\nimport IVSProvider from './providers/IVSProvider';\nimport UserProvider from './providers/UserProvider';\nimport QuestionProvider from './providers/QuestionProvider';\nimport PlayerMetadataProvider from './providers/PlayerMetadataProvider';\nimport VoteProvider from './providers/VoteProvider';\nimport WebSocketClient from './WebSocketClient'\nimport Player from './player/Player';\nimport QuestionList from './questionList/QuestionList';\nimport AddQuestionButton from './addQuestion/AddQuestionButton';\nimport SignInButton from './auth/SignInButton';\nimport './App.css';\n\nfunction App() {\n    return (\n        <IVSProvider>\n            <PlayerMetadataProvider>\n                <VoteProvider>\n                    <QuestionProvider>\n                        <UserProvider>\n                            <WebSocketClient/>\n                            <header>\n                                <h1>Interactive Live Q&A</h1>\n                                <SignInButton/>\n                            </header>\n                            <section>\n                                <Player/>\n                                <QuestionList/>\n                                <AddQuestionButton/>\n                            </section>\n                        </UserProvider>\n                    </QuestionProvider>\n                </VoteProvider>\n            </PlayerMetadataProvider>\n        </IVSProvider> \n    );\n}\n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n"]}}